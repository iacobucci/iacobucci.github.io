var Vo=Object.defineProperty;var Ko=(t,e,s)=>e in t?Vo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var _t=(t,e,s)=>Ko(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Br(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const B={},At=[],Re=()=>{},Jo=()=>!1,Bs=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),qr=t=>t.startsWith("onUpdate:"),ne=Object.assign,Hr=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Wo=Object.prototype.hasOwnProperty,H=(t,e)=>Wo.call(t,e),R=Array.isArray,Ct=t=>qs(t)==="[object Map]",mi=t=>qs(t)==="[object Set]",I=t=>typeof t=="function",Y=t=>typeof t=="string",st=t=>typeof t=="symbol",Q=t=>t!==null&&typeof t=="object",yi=t=>(Q(t)||I(t))&&I(t.then)&&I(t.catch),wi=Object.prototype.toString,qs=t=>wi.call(t),zo=t=>qs(t).slice(8,-1),bi=t=>qs(t)==="[object Object]",Vr=t=>Y(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Gt=Br(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Hs=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},Go=/-(\w)/g,Fe=Hs(t=>t.replace(Go,(e,s)=>s?s.toUpperCase():"")),Qo=/\B([A-Z])/g,He=Hs(t=>t.replace(Qo,"-$1").toLowerCase()),Si=Hs(t=>t.charAt(0).toUpperCase()+t.slice(1)),rr=Hs(t=>t?`on${Si(t)}`:""),fe=(t,e)=>!Object.is(t,e),Os=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},Ti=(t,e,s,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:s})},br=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let vn;const Vs=()=>vn||(vn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Kr(t){if(R(t)){const e={};for(let s=0;s<t.length;s++){const r=t[s],n=Y(r)?ea(r):Kr(r);if(n)for(const i in n)e[i]=n[i]}return e}else if(Y(t)||Q(t))return t}const Yo=/;(?![^(]*\))/g,Xo=/:([^]+)/,Zo=/\/\*[^]*?\*\//g;function ea(t){const e={};return t.replace(Zo,"").split(Yo).forEach(s=>{if(s){const r=s.split(Xo);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Jr(t){let e="";if(Y(t))e=t;else if(R(t))for(let s=0;s<t.length;s++){const r=Jr(t[s]);r&&(e+=r+" ")}else if(Q(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const ta="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",sa=Br(ta);function Ei(t){return!!t||t===""}const ki=t=>!!(t&&t.__v_isRef===!0),js=t=>Y(t)?t:t==null?"":R(t)||Q(t)&&(t.toString===wi||!I(t.toString))?ki(t)?js(t.value):JSON.stringify(t,xi,2):String(t),xi=(t,e)=>ki(e)?xi(t,e.value):Ct(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[r,n],i)=>(s[nr(r,i)+" =>"]=n,s),{})}:mi(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>nr(s))}:st(e)?nr(e):Q(e)&&!R(e)&&!bi(e)?String(e):e,nr=(t,e="")=>{var s;return st(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let he;class ra{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=he,!e&&he&&(this.index=(he.scopes||(he.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=he;try{return he=this,e()}finally{he=s}}}on(){++this._on===1&&(this.prevScope=he,he=this)}off(){this._on>0&&--this._on===0&&(he=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,r;for(s=0,r=this.effects.length;s<r;s++)this.effects[s].stop();for(this.effects.length=0,s=0,r=this.cleanups.length;s<r;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,r=this.scopes.length;s<r;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function na(){return he}let z;const ir=new WeakSet;class Oi{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,he&&he.active&&he.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ir.has(this)&&(ir.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ai(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,mn(this),Ci(this);const e=z,s=Se;z=this,Se=!0;try{return this.fn()}finally{ji(this),z=e,Se=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Gr(e);this.deps=this.depsTail=void 0,mn(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ir.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Sr(this)&&this.run()}get dirty(){return Sr(this)}}let Pi=0,Qt,Yt;function Ai(t,e=!1){if(t.flags|=8,e){t.next=Yt,Yt=t;return}t.next=Qt,Qt=t}function Wr(){Pi++}function zr(){if(--Pi>0)return;if(Yt){let e=Yt;for(Yt=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Qt;){let e=Qt;for(Qt=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=s}}if(t)throw t}function Ci(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ji(t){let e,s=t.depsTail,r=s;for(;r;){const n=r.prevDep;r.version===-1?(r===s&&(s=n),Gr(r),ia(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}t.deps=e,t.depsTail=s}function Sr(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Ri(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Ri(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===ns)||(t.globalVersion=ns,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Sr(t))))return;t.flags|=2;const e=t.dep,s=z,r=Se;z=t,Se=!0;try{Ci(t);const n=t.fn(t._value);(e.version===0||fe(n,t._value))&&(t.flags|=128,t._value=n,e.version++)}catch(n){throw e.version++,n}finally{z=s,Se=r,ji(t),t.flags&=-3}}function Gr(t,e=!1){const{dep:s,prevSub:r,nextSub:n}=t;if(r&&(r.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=r,t.nextSub=void 0),s.subs===t&&(s.subs=r,!r&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)Gr(i,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function ia(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let Se=!0;const $i=[];function Ne(){$i.push(Se),Se=!1}function Be(){const t=$i.pop();Se=t===void 0?!0:t}function mn(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=z;z=void 0;try{e()}finally{z=s}}}let ns=0;class oa{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ks{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!z||!Se||z===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==z)s=this.activeLink=new oa(z,this),z.deps?(s.prevDep=z.depsTail,z.depsTail.nextDep=s,z.depsTail=s):z.deps=z.depsTail=s,Ii(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const r=s.nextDep;r.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=r),s.prevDep=z.depsTail,s.nextDep=void 0,z.depsTail.nextDep=s,z.depsTail=s,z.deps===s&&(z.deps=r)}return s}trigger(e){this.version++,ns++,this.notify(e)}notify(e){Wr();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{zr()}}}function Ii(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Ii(r)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const Tr=new WeakMap,dt=Symbol(""),Er=Symbol(""),is=Symbol("");function se(t,e,s){if(Se&&z){let r=Tr.get(t);r||Tr.set(t,r=new Map);let n=r.get(s);n||(r.set(s,n=new Ks),n.map=r,n.key=s),n.track()}}function De(t,e,s,r,n,i){const o=Tr.get(t);if(!o){ns++;return}const a=l=>{l&&l.trigger()};if(Wr(),e==="clear")o.forEach(a);else{const l=R(t),u=l&&Vr(s);if(l&&s==="length"){const c=Number(r);o.forEach((h,p)=>{(p==="length"||p===is||!st(p)&&p>=c)&&a(h)})}else switch((s!==void 0||o.has(void 0))&&a(o.get(s)),u&&a(o.get(is)),e){case"add":l?u&&a(o.get("length")):(a(o.get(dt)),Ct(t)&&a(o.get(Er)));break;case"delete":l||(a(o.get(dt)),Ct(t)&&a(o.get(Er)));break;case"set":Ct(t)&&a(o.get(dt));break}}zr()}function vt(t){const e=q(t);return e===t?e:(se(e,"iterate",is),me(t)?e:e.map(ee))}function Js(t){return se(t=q(t),"iterate",is),t}const aa={__proto__:null,[Symbol.iterator](){return or(this,Symbol.iterator,ee)},concat(...t){return vt(this).concat(...t.map(e=>R(e)?vt(e):e))},entries(){return or(this,"entries",t=>(t[1]=ee(t[1]),t))},every(t,e){return Ie(this,"every",t,e,void 0,arguments)},filter(t,e){return Ie(this,"filter",t,e,s=>s.map(ee),arguments)},find(t,e){return Ie(this,"find",t,e,ee,arguments)},findIndex(t,e){return Ie(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Ie(this,"findLast",t,e,ee,arguments)},findLastIndex(t,e){return Ie(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Ie(this,"forEach",t,e,void 0,arguments)},includes(...t){return ar(this,"includes",t)},indexOf(...t){return ar(this,"indexOf",t)},join(t){return vt(this).join(t)},lastIndexOf(...t){return ar(this,"lastIndexOf",t)},map(t,e){return Ie(this,"map",t,e,void 0,arguments)},pop(){return Ht(this,"pop")},push(...t){return Ht(this,"push",t)},reduce(t,...e){return yn(this,"reduce",t,e)},reduceRight(t,...e){return yn(this,"reduceRight",t,e)},shift(){return Ht(this,"shift")},some(t,e){return Ie(this,"some",t,e,void 0,arguments)},splice(...t){return Ht(this,"splice",t)},toReversed(){return vt(this).toReversed()},toSorted(t){return vt(this).toSorted(t)},toSpliced(...t){return vt(this).toSpliced(...t)},unshift(...t){return Ht(this,"unshift",t)},values(){return or(this,"values",ee)}};function or(t,e,s){const r=Js(t),n=r[e]();return r!==t&&!me(t)&&(n._next=n.next,n.next=()=>{const i=n._next();return i.value&&(i.value=s(i.value)),i}),n}const la=Array.prototype;function Ie(t,e,s,r,n,i){const o=Js(t),a=o!==t&&!me(t),l=o[e];if(l!==la[e]){const h=l.apply(t,i);return a?ee(h):h}let u=s;o!==t&&(a?u=function(h,p){return s.call(this,ee(h),p,t)}:s.length>2&&(u=function(h,p){return s.call(this,h,p,t)}));const c=l.call(o,u,r);return a&&n?n(c):c}function yn(t,e,s,r){const n=Js(t);let i=s;return n!==t&&(me(t)?s.length>3&&(i=function(o,a,l){return s.call(this,o,a,l,t)}):i=function(o,a,l){return s.call(this,o,ee(a),l,t)}),n[e](i,...r)}function ar(t,e,s){const r=q(t);se(r,"iterate",is);const n=r[e](...s);return(n===-1||n===!1)&&Zr(s[0])?(s[0]=q(s[0]),r[e](...s)):n}function Ht(t,e,s=[]){Ne(),Wr();const r=q(t)[e].apply(t,s);return zr(),Be(),r}const ca=Br("__proto__,__v_isRef,__isVue"),Li=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(st));function ua(t){st(t)||(t=String(t));const e=q(this);return se(e,"has",t),e.hasOwnProperty(t)}class Ui{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,r){if(s==="__v_skip")return e.__v_skip;const n=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return i;if(s==="__v_raw")return r===(n?i?wa:Ni:i?Fi:Mi).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=R(e);if(!n){let l;if(o&&(l=aa[s]))return l;if(s==="hasOwnProperty")return ua}const a=Reflect.get(e,s,te(e)?e:r);return(st(s)?Li.has(s):ca(s))||(n||se(e,"get",s),i)?a:te(a)?o&&Vr(s)?a:a.value:Q(a)?n?Bi(a):Yr(a):a}}class Di extends Ui{constructor(e=!1){super(!1,e)}set(e,s,r,n){let i=e[s];if(!this._isShallow){const l=et(i);if(!me(r)&&!et(r)&&(i=q(i),r=q(r)),!R(e)&&te(i)&&!te(r))return l?!1:(i.value=r,!0)}const o=R(e)&&Vr(s)?Number(s)<e.length:H(e,s),a=Reflect.set(e,s,r,te(e)?e:n);return e===q(n)&&(o?fe(r,i)&&De(e,"set",s,r):De(e,"add",s,r)),a}deleteProperty(e,s){const r=H(e,s);e[s];const n=Reflect.deleteProperty(e,s);return n&&r&&De(e,"delete",s,void 0),n}has(e,s){const r=Reflect.has(e,s);return(!st(s)||!Li.has(s))&&se(e,"has",s),r}ownKeys(e){return se(e,"iterate",R(e)?"length":dt),Reflect.ownKeys(e)}}class ha extends Ui{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const fa=new Di,da=new ha,pa=new Di(!0);const kr=t=>t,ys=t=>Reflect.getPrototypeOf(t);function ga(t,e,s){return function(...r){const n=this.__v_raw,i=q(n),o=Ct(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=n[t](...r),c=s?kr:e?Rs:ee;return!e&&se(i,"iterate",l?Er:dt),{next(){const{value:h,done:p}=u.next();return p?{value:h,done:p}:{value:a?[c(h[0]),c(h[1])]:c(h),done:p}},[Symbol.iterator](){return this}}}}function ws(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function _a(t,e){const s={get(n){const i=this.__v_raw,o=q(i),a=q(n);t||(fe(n,a)&&se(o,"get",n),se(o,"get",a));const{has:l}=ys(o),u=e?kr:t?Rs:ee;if(l.call(o,n))return u(i.get(n));if(l.call(o,a))return u(i.get(a));i!==o&&i.get(n)},get size(){const n=this.__v_raw;return!t&&se(q(n),"iterate",dt),Reflect.get(n,"size",n)},has(n){const i=this.__v_raw,o=q(i),a=q(n);return t||(fe(n,a)&&se(o,"has",n),se(o,"has",a)),n===a?i.has(n):i.has(n)||i.has(a)},forEach(n,i){const o=this,a=o.__v_raw,l=q(a),u=e?kr:t?Rs:ee;return!t&&se(l,"iterate",dt),a.forEach((c,h)=>n.call(i,u(c),u(h),o))}};return ne(s,t?{add:ws("add"),set:ws("set"),delete:ws("delete"),clear:ws("clear")}:{add(n){!e&&!me(n)&&!et(n)&&(n=q(n));const i=q(this);return ys(i).has.call(i,n)||(i.add(n),De(i,"add",n,n)),this},set(n,i){!e&&!me(i)&&!et(i)&&(i=q(i));const o=q(this),{has:a,get:l}=ys(o);let u=a.call(o,n);u||(n=q(n),u=a.call(o,n));const c=l.call(o,n);return o.set(n,i),u?fe(i,c)&&De(o,"set",n,i):De(o,"add",n,i),this},delete(n){const i=q(this),{has:o,get:a}=ys(i);let l=o.call(i,n);l||(n=q(n),l=o.call(i,n)),a&&a.call(i,n);const u=i.delete(n);return l&&De(i,"delete",n,void 0),u},clear(){const n=q(this),i=n.size!==0,o=n.clear();return i&&De(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=ga(n,t,e)}),s}function Qr(t,e){const s=_a(t,e);return(r,n,i)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?r:Reflect.get(H(s,n)&&n in r?s:r,n,i)}const va={get:Qr(!1,!1)},ma={get:Qr(!1,!0)},ya={get:Qr(!0,!1)};const Mi=new WeakMap,Fi=new WeakMap,Ni=new WeakMap,wa=new WeakMap;function ba(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Sa(t){return t.__v_skip||!Object.isExtensible(t)?0:ba(zo(t))}function Yr(t){return et(t)?t:Xr(t,!1,fa,va,Mi)}function Ta(t){return Xr(t,!1,pa,ma,Fi)}function Bi(t){return Xr(t,!0,da,ya,Ni)}function Xr(t,e,s,r,n){if(!Q(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Sa(t);if(i===0)return t;const o=n.get(t);if(o)return o;const a=new Proxy(t,i===2?r:s);return n.set(t,a),a}function jt(t){return et(t)?jt(t.__v_raw):!!(t&&t.__v_isReactive)}function et(t){return!!(t&&t.__v_isReadonly)}function me(t){return!!(t&&t.__v_isShallow)}function Zr(t){return t?!!t.__v_raw:!1}function q(t){const e=t&&t.__v_raw;return e?q(e):t}function Ea(t){return!H(t,"__v_skip")&&Object.isExtensible(t)&&Ti(t,"__v_skip",!0),t}const ee=t=>Q(t)?Yr(t):t,Rs=t=>Q(t)?Bi(t):t;function te(t){return t?t.__v_isRef===!0:!1}function $s(t){return ka(t,!1)}function ka(t,e){return te(t)?t:new xa(t,e)}class xa{constructor(e,s){this.dep=new Ks,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:q(e),this._value=s?e:ee(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,r=this.__v_isShallow||me(e)||et(e);e=r?e:q(e),fe(e,s)&&(this._rawValue=e,this._value=r?e:ee(e),this.dep.trigger())}}function qi(t){return te(t)?t.value:t}const Oa={get:(t,e,s)=>e==="__v_raw"?t:qi(Reflect.get(t,e,s)),set:(t,e,s,r)=>{const n=t[e];return te(n)&&!te(s)?(n.value=s,!0):Reflect.set(t,e,s,r)}};function Hi(t){return jt(t)?t:new Proxy(t,Oa)}class Pa{constructor(e){this.__v_isRef=!0,this._value=void 0;const s=this.dep=new Ks,{get:r,set:n}=e(s.track.bind(s),s.trigger.bind(s));this._get=r,this._set=n}get value(){return this._value=this._get()}set value(e){this._set(e)}}function Aa(t){return new Pa(t)}class Ca{constructor(e,s,r){this.fn=e,this.setter=s,this._value=void 0,this.dep=new Ks(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ns-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&z!==this)return Ai(this,!0),!0}get value(){const e=this.dep.track();return Ri(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function ja(t,e,s=!1){let r,n;return I(t)?r=t:(r=t.get,n=t.set),new Ca(r,n,s)}const bs={},Is=new WeakMap;let ut;function Ra(t,e=!1,s=ut){if(s){let r=Is.get(s);r||Is.set(s,r=[]),r.push(t)}}function $a(t,e,s=B){const{immediate:r,deep:n,once:i,scheduler:o,augmentJob:a,call:l}=s,u=O=>n?O:me(O)||n===!1||n===0?Me(O,1):Me(O);let c,h,p,g,b=!1,k=!1;if(te(t)?(h=()=>t.value,b=me(t)):jt(t)?(h=()=>u(t),b=!0):R(t)?(k=!0,b=t.some(O=>jt(O)||me(O)),h=()=>t.map(O=>{if(te(O))return O.value;if(jt(O))return u(O);if(I(O))return l?l(O,2):O()})):I(t)?e?h=l?()=>l(t,2):t:h=()=>{if(p){Ne();try{p()}finally{Be()}}const O=ut;ut=c;try{return l?l(t,3,[g]):t(g)}finally{ut=O}}:h=Re,e&&n){const O=h,D=n===!0?1/0:n;h=()=>Me(O(),D)}const P=na(),$=()=>{c.stop(),P&&P.active&&Hr(P.effects,c)};if(i&&e){const O=e;e=(...D)=>{O(...D),$()}}let N=k?new Array(t.length).fill(bs):bs;const U=O=>{if(!(!(c.flags&1)||!c.dirty&&!O))if(e){const D=c.run();if(n||b||(k?D.some((Ke,Te)=>fe(Ke,N[Te])):fe(D,N))){p&&p();const Ke=ut;ut=c;try{const Te=[D,N===bs?void 0:k&&N[0]===bs?[]:N,g];N=D,l?l(e,3,Te):e(...Te)}finally{ut=Ke}}}else c.run()};return a&&a(U),c=new Oi(h),c.scheduler=o?()=>o(U,!1):U,g=O=>Ra(O,!1,c),p=c.onStop=()=>{const O=Is.get(c);if(O){if(l)l(O,4);else for(const D of O)D();Is.delete(c)}},e?r?U(!0):N=c.run():o?o(U.bind(null,!0),!0):c.run(),$.pause=c.pause.bind(c),$.resume=c.resume.bind(c),$.stop=$,$}function Me(t,e=1/0,s){if(e<=0||!Q(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,te(t))Me(t.value,e,s);else if(R(t))for(let r=0;r<t.length;r++)Me(t[r],e,s);else if(mi(t)||Ct(t))t.forEach(r=>{Me(r,e,s)});else if(bi(t)){for(const r in t)Me(t[r],e,s);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Me(t[r],e,s)}return t}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function us(t,e,s,r){try{return r?t(...r):t()}catch(n){Ws(n,e,s)}}function $e(t,e,s,r){if(I(t)){const n=us(t,e,s,r);return n&&yi(n)&&n.catch(i=>{Ws(i,e,s)}),n}if(R(t)){const n=[];for(let i=0;i<t.length;i++)n.push($e(t[i],e,s,r));return n}}function Ws(t,e,s,r=!0){const n=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||B;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const c=a.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](t,l,u)===!1)return}a=a.parent}if(i){Ne(),us(i,null,10,[t,l,u]),Be();return}}Ia(t,s,n,r,o)}function Ia(t,e,s,r=!0,n=!1){if(n)throw t;console.error(t)}const le=[];let Ce=-1;const Rt=[];let Ge=null,xt=0;const Vi=Promise.resolve();let Ls=null;function La(t){const e=Ls||Vi;return t?e.then(this?t.bind(this):t):e}function Ua(t){let e=Ce+1,s=le.length;for(;e<s;){const r=e+s>>>1,n=le[r],i=os(n);i<t||i===t&&n.flags&2?e=r+1:s=r}return e}function en(t){if(!(t.flags&1)){const e=os(t),s=le[le.length-1];!s||!(t.flags&2)&&e>=os(s)?le.push(t):le.splice(Ua(e),0,t),t.flags|=1,Ki()}}function Ki(){Ls||(Ls=Vi.then(Wi))}function Da(t){R(t)?Rt.push(...t):Ge&&t.id===-1?Ge.splice(xt+1,0,t):t.flags&1||(Rt.push(t),t.flags|=1),Ki()}function wn(t,e,s=Ce+1){for(;s<le.length;s++){const r=le[s];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;le.splice(s,1),s--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Ji(t){if(Rt.length){const e=[...new Set(Rt)].sort((s,r)=>os(s)-os(r));if(Rt.length=0,Ge){Ge.push(...e);return}for(Ge=e,xt=0;xt<Ge.length;xt++){const s=Ge[xt];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Ge=null,xt=0}}const os=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Wi(t){try{for(Ce=0;Ce<le.length;Ce++){const e=le[Ce];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),us(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Ce<le.length;Ce++){const e=le[Ce];e&&(e.flags&=-2)}Ce=-1,le.length=0,Ji(),Ls=null,(le.length||Rt.length)&&Wi()}}let _e=null,zi=null;function Us(t){const e=_e;return _e=t,zi=t&&t.type.__scopeId||null,e}function Ma(t,e=_e,s){if(!e||t._n)return t;const r=(...n)=>{r._d&&An(-1);const i=Us(e);let o;try{o=t(...n)}finally{Us(i),r._d&&An(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Fa(t,e){if(_e===null)return t;const s=Zs(_e),r=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[i,o,a,l=B]=e[n];i&&(I(i)&&(i={mounted:i,updated:i}),i.deep&&Me(o),r.push({dir:i,instance:s,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function at(t,e,s,r){const n=t.dirs,i=e&&e.dirs;for(let o=0;o<n.length;o++){const a=n[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Ne(),$e(l,s,8,[t.el,a,t,e]),Be())}}const Na=Symbol("_vte"),Ba=t=>t.__isTeleport;function tn(t,e){t.shapeFlag&6&&t.component?(t.transition=e,tn(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function zs(t,e){return I(t)?ne({name:t.name},e,{setup:t}):t}function Gi(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Ds(t,e,s,r,n=!1){if(R(t)){t.forEach((b,k)=>Ds(b,e&&(R(e)?e[k]:e),s,r,n));return}if(Xt(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Ds(t,e,s,r.component.subTree);return}const i=r.shapeFlag&4?Zs(r.component):r.el,o=n?null:i,{i:a,r:l}=t,u=e&&e.r,c=a.refs===B?a.refs={}:a.refs,h=a.setupState,p=q(h),g=h===B?()=>!1:b=>H(p,b);if(u!=null&&u!==l&&(Y(u)?(c[u]=null,g(u)&&(h[u]=null)):te(u)&&(u.value=null)),I(l))us(l,a,12,[o,c]);else{const b=Y(l),k=te(l);if(b||k){const P=()=>{if(t.f){const $=b?g(l)?h[l]:c[l]:l.value;n?R($)&&Hr($,i):R($)?$.includes(i)||$.push(i):b?(c[l]=[i],g(l)&&(h[l]=c[l])):(l.value=[i],t.k&&(c[t.k]=l.value))}else b?(c[l]=o,g(l)&&(h[l]=o)):k&&(l.value=o,t.k&&(c[t.k]=o))};o?(P.id=-1,ge(P,s)):P()}}}Vs().requestIdleCallback;Vs().cancelIdleCallback;const Xt=t=>!!t.type.__asyncLoader,Qi=t=>t.type.__isKeepAlive;function qa(t,e){Yi(t,"a",e)}function Ha(t,e){Yi(t,"da",e)}function Yi(t,e,s=re){const r=t.__wdc||(t.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(Gs(e,r,s),s){let n=s.parent;for(;n&&n.parent;)Qi(n.parent.vnode)&&Va(r,e,s,n),n=n.parent}}function Va(t,e,s,r){const n=Gs(e,t,r,!0);Xi(()=>{Hr(r[e],n)},s)}function Gs(t,e,s=re,r=!1){if(s){const n=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Ne();const a=hs(s),l=$e(e,s,t,o);return a(),Be(),l});return r?n.unshift(i):n.push(i),i}}const Ve=t=>(e,s=re)=>{(!ls||t==="sp")&&Gs(t,(...r)=>e(...r),s)},Ka=Ve("bm"),Qs=Ve("m"),Ja=Ve("bu"),Wa=Ve("u"),za=Ve("bum"),Xi=Ve("um"),Ga=Ve("sp"),Qa=Ve("rtg"),Ya=Ve("rtc");function Xa(t,e=re){Gs("ec",t,e)}const Za=Symbol.for("v-ndc");function el(t,e,s,r){let n;const i=s,o=R(t);if(o||Y(t)){const a=o&&jt(t);let l=!1,u=!1;a&&(l=!me(t),u=et(t),t=Js(t)),n=new Array(t.length);for(let c=0,h=t.length;c<h;c++)n[c]=e(l?u?Rs(ee(t[c])):ee(t[c]):t[c],c,void 0,i)}else if(typeof t=="number"){n=new Array(t);for(let a=0;a<t;a++)n[a]=e(a+1,a,void 0,i)}else if(Q(t))if(t[Symbol.iterator])n=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);n=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];n[l]=e(t[c],c,l,i)}}else n=[];return n}const xr=t=>t?wo(t)?Zs(t):xr(t.parent):null,Zt=ne(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>xr(t.parent),$root:t=>xr(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>eo(t),$forceUpdate:t=>t.f||(t.f=()=>{en(t.update)}),$nextTick:t=>t.n||(t.n=La.bind(t.proxy)),$watch:t=>Tl.bind(t)}),lr=(t,e)=>t!==B&&!t.__isScriptSetup&&H(t,e),tl={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:r,data:n,props:i,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return n[e];case 4:return s[e];case 3:return i[e]}else{if(lr(r,e))return o[e]=1,r[e];if(n!==B&&H(n,e))return o[e]=2,n[e];if((u=t.propsOptions[0])&&H(u,e))return o[e]=3,i[e];if(s!==B&&H(s,e))return o[e]=4,s[e];Or&&(o[e]=0)}}const c=Zt[e];let h,p;if(c)return e==="$attrs"&&se(t.attrs,"get",""),c(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(s!==B&&H(s,e))return o[e]=4,s[e];if(p=l.config.globalProperties,H(p,e))return p[e]},set({_:t},e,s){const{data:r,setupState:n,ctx:i}=t;return lr(n,e)?(n[e]=s,!0):r!==B&&H(r,e)?(r[e]=s,!0):H(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:r,appContext:n,propsOptions:i}},o){let a;return!!s[o]||t!==B&&H(t,o)||lr(e,o)||(a=i[0])&&H(a,o)||H(r,o)||H(Zt,o)||H(n.config.globalProperties,o)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:H(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function bn(t){return R(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let Or=!0;function sl(t){const e=eo(t),s=t.proxy,r=t.ctx;Or=!1,e.beforeCreate&&Sn(e.beforeCreate,t,"bc");const{data:n,computed:i,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:h,mounted:p,beforeUpdate:g,updated:b,activated:k,deactivated:P,beforeDestroy:$,beforeUnmount:N,destroyed:U,unmounted:O,render:D,renderTracked:Ke,renderTriggered:Te,errorCaptured:Je,serverPrefetch:ps,expose:nt,inheritAttrs:Ft,components:gs,directives:_s,filters:tr}=e;if(u&&rl(u,r,null),o)for(const G in o){const K=o[G];I(K)&&(r[G]=K.bind(s))}if(n){const G=n.call(s,s);Q(G)&&(t.data=Yr(G))}if(Or=!0,i)for(const G in i){const K=i[G],it=I(K)?K.bind(s,s):I(K.get)?K.get.bind(s,s):Re,vs=!I(K)&&I(K.set)?K.set.bind(s):Re,ot=Wl({get:it,set:vs});Object.defineProperty(r,G,{enumerable:!0,configurable:!0,get:()=>ot.value,set:Ee=>ot.value=Ee})}if(a)for(const G in a)Zi(a[G],r,s,G);if(l){const G=I(l)?l.call(s):l;Reflect.ownKeys(G).forEach(K=>{cl(K,G[K])})}c&&Sn(c,t,"c");function ie(G,K){R(K)?K.forEach(it=>G(it.bind(s))):K&&G(K.bind(s))}if(ie(Ka,h),ie(Qs,p),ie(Ja,g),ie(Wa,b),ie(qa,k),ie(Ha,P),ie(Xa,Je),ie(Ya,Ke),ie(Qa,Te),ie(za,N),ie(Xi,O),ie(Ga,ps),R(nt))if(nt.length){const G=t.exposed||(t.exposed={});nt.forEach(K=>{Object.defineProperty(G,K,{get:()=>s[K],set:it=>s[K]=it})})}else t.exposed||(t.exposed={});D&&t.render===Re&&(t.render=D),Ft!=null&&(t.inheritAttrs=Ft),gs&&(t.components=gs),_s&&(t.directives=_s),ps&&Gi(t)}function rl(t,e,s=Re){R(t)&&(t=Pr(t));for(const r in t){const n=t[r];let i;Q(n)?"default"in n?i=Ps(n.from||r,n.default,!0):i=Ps(n.from||r):i=Ps(n),te(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Sn(t,e,s){$e(R(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,s)}function Zi(t,e,s,r){let n=r.includes(".")?fo(s,r):()=>s[r];if(Y(t)){const i=e[t];I(i)&&ur(n,i)}else if(I(t))ur(n,t.bind(s));else if(Q(t))if(R(t))t.forEach(i=>Zi(i,e,s,r));else{const i=I(t.handler)?t.handler.bind(s):e[t.handler];I(i)&&ur(n,i,t)}}function eo(t){const e=t.type,{mixins:s,extends:r}=e,{mixins:n,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!n.length&&!s&&!r?l=e:(l={},n.length&&n.forEach(u=>Ms(l,u,o,!0)),Ms(l,e,o)),Q(e)&&i.set(e,l),l}function Ms(t,e,s,r=!1){const{mixins:n,extends:i}=e;i&&Ms(t,i,s,!0),n&&n.forEach(o=>Ms(t,o,s,!0));for(const o in e)if(!(r&&o==="expose")){const a=nl[o]||s&&s[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const nl={data:Tn,props:En,emits:En,methods:Wt,computed:Wt,beforeCreate:oe,created:oe,beforeMount:oe,mounted:oe,beforeUpdate:oe,updated:oe,beforeDestroy:oe,beforeUnmount:oe,destroyed:oe,unmounted:oe,activated:oe,deactivated:oe,errorCaptured:oe,serverPrefetch:oe,components:Wt,directives:Wt,watch:ol,provide:Tn,inject:il};function Tn(t,e){return e?t?function(){return ne(I(t)?t.call(this,this):t,I(e)?e.call(this,this):e)}:e:t}function il(t,e){return Wt(Pr(t),Pr(e))}function Pr(t){if(R(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function oe(t,e){return t?[...new Set([].concat(t,e))]:e}function Wt(t,e){return t?ne(Object.create(null),t,e):e}function En(t,e){return t?R(t)&&R(e)?[...new Set([...t,...e])]:ne(Object.create(null),bn(t),bn(e??{})):e}function ol(t,e){if(!t)return e;if(!e)return t;const s=ne(Object.create(null),t);for(const r in e)s[r]=oe(t[r],e[r]);return s}function to(){return{app:null,config:{isNativeTag:Jo,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let al=0;function ll(t,e){return function(r,n=null){I(r)||(r=ne({},r)),n!=null&&!Q(n)&&(n=null);const i=to(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:al++,_component:r,_props:n,_container:null,_context:i,_instance:null,version:zl,get config(){return i.config},set config(c){},use(c,...h){return o.has(c)||(c&&I(c.install)?(o.add(c),c.install(u,...h)):I(c)&&(o.add(c),c(u,...h))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,h){return h?(i.components[c]=h,u):i.components[c]},directive(c,h){return h?(i.directives[c]=h,u):i.directives[c]},mount(c,h,p){if(!l){const g=u._ceVNode||ye(r,n);return g.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),t(g,c,p),l=!0,u._container=c,c.__vue_app__=u,Zs(g.component)}},onUnmount(c){a.push(c)},unmount(){l&&($e(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,h){return i.provides[c]=h,u},runWithContext(c){const h=$t;$t=u;try{return c()}finally{$t=h}}};return u}}let $t=null;function cl(t,e){if(re){let s=re.provides;const r=re.parent&&re.parent.provides;r===s&&(s=re.provides=Object.create(r)),s[t]=e}}function Ps(t,e,s=!1){const r=re||_e;if(r||$t){let n=$t?$t._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return s&&I(e)?e.call(r&&r.proxy):e}}const so={},ro=()=>Object.create(so),no=t=>Object.getPrototypeOf(t)===so;function ul(t,e,s,r=!1){const n={},i=ro();t.propsDefaults=Object.create(null),io(t,e,n,i);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);s?t.props=r?n:Ta(n):t.type.props?t.props=n:t.props=i,t.attrs=i}function hl(t,e,s,r){const{props:n,attrs:i,vnode:{patchFlag:o}}=t,a=q(n),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let h=0;h<c.length;h++){let p=c[h];if(Ys(t.emitsOptions,p))continue;const g=e[p];if(l)if(H(i,p))g!==i[p]&&(i[p]=g,u=!0);else{const b=Fe(p);n[b]=Ar(l,a,b,g,t,!1)}else g!==i[p]&&(i[p]=g,u=!0)}}}else{io(t,e,n,i)&&(u=!0);let c;for(const h in a)(!e||!H(e,h)&&((c=He(h))===h||!H(e,c)))&&(l?s&&(s[h]!==void 0||s[c]!==void 0)&&(n[h]=Ar(l,a,h,void 0,t,!0)):delete n[h]);if(i!==a)for(const h in i)(!e||!H(e,h))&&(delete i[h],u=!0)}u&&De(t.attrs,"set","")}function io(t,e,s,r){const[n,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Gt(l))continue;const u=e[l];let c;n&&H(n,c=Fe(l))?!i||!i.includes(c)?s[c]=u:(a||(a={}))[c]=u:Ys(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=q(s),u=a||B;for(let c=0;c<i.length;c++){const h=i[c];s[h]=Ar(n,l,h,u[h],t,!H(u,h))}}return o}function Ar(t,e,s,r,n,i){const o=t[s];if(o!=null){const a=H(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&I(l)){const{propsDefaults:u}=n;if(s in u)r=u[s];else{const c=hs(n);r=u[s]=l.call(null,e),c()}}else r=l;n.ce&&n.ce._setProp(s,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===He(s))&&(r=!0))}return r}const fl=new WeakMap;function oo(t,e,s=!1){const r=s?fl:e.propsCache,n=r.get(t);if(n)return n;const i=t.props,o={},a=[];let l=!1;if(!I(t)){const c=h=>{l=!0;const[p,g]=oo(h,e,!0);ne(o,p),g&&a.push(...g)};!s&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!i&&!l)return Q(t)&&r.set(t,At),At;if(R(i))for(let c=0;c<i.length;c++){const h=Fe(i[c]);kn(h)&&(o[h]=B)}else if(i)for(const c in i){const h=Fe(c);if(kn(h)){const p=i[c],g=o[h]=R(p)||I(p)?{type:p}:ne({},p),b=g.type;let k=!1,P=!0;if(R(b))for(let $=0;$<b.length;++$){const N=b[$],U=I(N)&&N.name;if(U==="Boolean"){k=!0;break}else U==="String"&&(P=!1)}else k=I(b)&&b.name==="Boolean";g[0]=k,g[1]=P,(k||H(g,"default"))&&a.push(h)}}const u=[o,a];return Q(t)&&r.set(t,u),u}function kn(t){return t[0]!=="$"&&!Gt(t)}const sn=t=>t[0]==="_"||t==="$stable",rn=t=>R(t)?t.map(je):[je(t)],dl=(t,e,s)=>{if(e._n)return e;const r=Ma((...n)=>rn(e(...n)),s);return r._c=!1,r},ao=(t,e,s)=>{const r=t._ctx;for(const n in t){if(sn(n))continue;const i=t[n];if(I(i))e[n]=dl(n,i,r);else if(i!=null){const o=rn(i);e[n]=()=>o}}},lo=(t,e)=>{const s=rn(e);t.slots.default=()=>s},co=(t,e,s)=>{for(const r in e)(s||!sn(r))&&(t[r]=e[r])},pl=(t,e,s)=>{const r=t.slots=ro();if(t.vnode.shapeFlag&32){const n=e._;n?(co(r,e,s),s&&Ti(r,"_",n,!0)):ao(e,r)}else e&&lo(t,e)},gl=(t,e,s)=>{const{vnode:r,slots:n}=t;let i=!0,o=B;if(r.shapeFlag&32){const a=e._;a?s&&a===1?i=!1:co(n,e,s):(i=!e.$stable,ao(e,n)),o=e}else e&&(lo(t,e),o={default:1});if(i)for(const a in n)!sn(a)&&o[a]==null&&delete n[a]},ge=Cl;function _l(t){return vl(t)}function vl(t,e){const s=Vs();s.__VUE__=!0;const{insert:r,remove:n,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:p,setScopeId:g=Re,insertStaticContent:b}=t,k=(f,d,_,y=null,v=null,m=null,E=void 0,T=null,S=!!d.dynamicChildren)=>{if(f===d)return;f&&!Vt(f,d)&&(y=ms(f),Ee(f,v,m,!0),f=null),d.patchFlag===-2&&(S=!1,d.dynamicChildren=null);const{type:w,ref:C,shapeFlag:x}=d;switch(w){case Xs:P(f,d,_,y);break;case tt:$(f,d,_,y);break;case hr:f==null&&N(d,_,y,E);break;case be:gs(f,d,_,y,v,m,E,T,S);break;default:x&1?D(f,d,_,y,v,m,E,T,S):x&6?_s(f,d,_,y,v,m,E,T,S):(x&64||x&128)&&w.process(f,d,_,y,v,m,E,T,S,Bt)}C!=null&&v&&Ds(C,f&&f.ref,m,d||f,!d)},P=(f,d,_,y)=>{if(f==null)r(d.el=a(d.children),_,y);else{const v=d.el=f.el;d.children!==f.children&&u(v,d.children)}},$=(f,d,_,y)=>{f==null?r(d.el=l(d.children||""),_,y):d.el=f.el},N=(f,d,_,y)=>{[f.el,f.anchor]=b(f.children,d,_,y,f.el,f.anchor)},U=({el:f,anchor:d},_,y)=>{let v;for(;f&&f!==d;)v=p(f),r(f,_,y),f=v;r(d,_,y)},O=({el:f,anchor:d})=>{let _;for(;f&&f!==d;)_=p(f),n(f),f=_;n(d)},D=(f,d,_,y,v,m,E,T,S)=>{d.type==="svg"?E="svg":d.type==="math"&&(E="mathml"),f==null?Ke(d,_,y,v,m,E,T,S):ps(f,d,v,m,E,T,S)},Ke=(f,d,_,y,v,m,E,T)=>{let S,w;const{props:C,shapeFlag:x,transition:A,dirs:j}=f;if(S=f.el=o(f.type,m,C&&C.is,C),x&8?c(S,f.children):x&16&&Je(f.children,S,null,y,v,cr(f,m),E,T),j&&at(f,null,y,"created"),Te(S,f,f.scopeId,E,y),C){for(const J in C)J!=="value"&&!Gt(J)&&i(S,J,null,C[J],m,y);"value"in C&&i(S,"value",null,C.value,m),(w=C.onVnodeBeforeMount)&&Pe(w,y,f)}j&&at(f,null,y,"beforeMount");const F=ml(v,A);F&&A.beforeEnter(S),r(S,d,_),((w=C&&C.onVnodeMounted)||F||j)&&ge(()=>{w&&Pe(w,y,f),F&&A.enter(S),j&&at(f,null,y,"mounted")},v)},Te=(f,d,_,y,v)=>{if(_&&g(f,_),y)for(let m=0;m<y.length;m++)g(f,y[m]);if(v){let m=v.subTree;if(d===m||_o(m.type)&&(m.ssContent===d||m.ssFallback===d)){const E=v.vnode;Te(f,E,E.scopeId,E.slotScopeIds,v.parent)}}},Je=(f,d,_,y,v,m,E,T,S=0)=>{for(let w=S;w<f.length;w++){const C=f[w]=T?Qe(f[w]):je(f[w]);k(null,C,d,_,y,v,m,E,T)}},ps=(f,d,_,y,v,m,E)=>{const T=d.el=f.el;let{patchFlag:S,dynamicChildren:w,dirs:C}=d;S|=f.patchFlag&16;const x=f.props||B,A=d.props||B;let j;if(_&&lt(_,!1),(j=A.onVnodeBeforeUpdate)&&Pe(j,_,d,f),C&&at(d,f,_,"beforeUpdate"),_&&lt(_,!0),(x.innerHTML&&A.innerHTML==null||x.textContent&&A.textContent==null)&&c(T,""),w?nt(f.dynamicChildren,w,T,_,y,cr(d,v),m):E||K(f,d,T,null,_,y,cr(d,v),m,!1),S>0){if(S&16)Ft(T,x,A,_,v);else if(S&2&&x.class!==A.class&&i(T,"class",null,A.class,v),S&4&&i(T,"style",x.style,A.style,v),S&8){const F=d.dynamicProps;for(let J=0;J<F.length;J++){const V=F[J],de=x[V],ce=A[V];(ce!==de||V==="value")&&i(T,V,de,ce,v,_)}}S&1&&f.children!==d.children&&c(T,d.children)}else!E&&w==null&&Ft(T,x,A,_,v);((j=A.onVnodeUpdated)||C)&&ge(()=>{j&&Pe(j,_,d,f),C&&at(d,f,_,"updated")},y)},nt=(f,d,_,y,v,m,E)=>{for(let T=0;T<d.length;T++){const S=f[T],w=d[T],C=S.el&&(S.type===be||!Vt(S,w)||S.shapeFlag&198)?h(S.el):_;k(S,w,C,null,y,v,m,E,!0)}},Ft=(f,d,_,y,v)=>{if(d!==_){if(d!==B)for(const m in d)!Gt(m)&&!(m in _)&&i(f,m,d[m],null,v,y);for(const m in _){if(Gt(m))continue;const E=_[m],T=d[m];E!==T&&m!=="value"&&i(f,m,T,E,v,y)}"value"in _&&i(f,"value",d.value,_.value,v)}},gs=(f,d,_,y,v,m,E,T,S)=>{const w=d.el=f?f.el:a(""),C=d.anchor=f?f.anchor:a("");let{patchFlag:x,dynamicChildren:A,slotScopeIds:j}=d;j&&(T=T?T.concat(j):j),f==null?(r(w,_,y),r(C,_,y),Je(d.children||[],_,C,v,m,E,T,S)):x>0&&x&64&&A&&f.dynamicChildren?(nt(f.dynamicChildren,A,_,v,m,E,T),(d.key!=null||v&&d===v.subTree)&&uo(f,d,!0)):K(f,d,_,C,v,m,E,T,S)},_s=(f,d,_,y,v,m,E,T,S)=>{d.slotScopeIds=T,f==null?d.shapeFlag&512?v.ctx.activate(d,_,y,E,S):tr(d,_,y,v,m,E,S):fn(f,d,S)},tr=(f,d,_,y,v,m,E)=>{const T=f.component=Nl(f,y,v);if(Qi(f)&&(T.ctx.renderer=Bt),ql(T,!1,E),T.asyncDep){if(v&&v.registerDep(T,ie,E),!f.el){const S=T.subTree=ye(tt);$(null,S,d,_)}}else ie(T,f,d,_,v,m,E)},fn=(f,d,_)=>{const y=d.component=f.component;if(Pl(f,d,_))if(y.asyncDep&&!y.asyncResolved){G(y,d,_);return}else y.next=d,y.update();else d.el=f.el,y.vnode=d},ie=(f,d,_,y,v,m,E)=>{const T=()=>{if(f.isMounted){let{next:x,bu:A,u:j,parent:F,vnode:J}=f;{const xe=ho(f);if(xe){x&&(x.el=J.el,G(f,x,E)),xe.asyncDep.then(()=>{f.isUnmounted||T()});return}}let V=x,de;lt(f,!1),x?(x.el=J.el,G(f,x,E)):x=J,A&&Os(A),(de=x.props&&x.props.onVnodeBeforeUpdate)&&Pe(de,F,x,J),lt(f,!0);const ce=On(f),ke=f.subTree;f.subTree=ce,k(ke,ce,h(ke.el),ms(ke),f,v,m),x.el=ce.el,V===null&&Al(f,ce.el),j&&ge(j,v),(de=x.props&&x.props.onVnodeUpdated)&&ge(()=>Pe(de,F,x,J),v)}else{let x;const{el:A,props:j}=d,{bm:F,m:J,parent:V,root:de,type:ce}=f,ke=Xt(d);lt(f,!1),F&&Os(F),!ke&&(x=j&&j.onVnodeBeforeMount)&&Pe(x,V,d),lt(f,!0);{de.ce&&de.ce._injectChildStyle(ce);const xe=f.subTree=On(f);k(null,xe,_,y,f,v,m),d.el=xe.el}if(J&&ge(J,v),!ke&&(x=j&&j.onVnodeMounted)){const xe=d;ge(()=>Pe(x,V,xe),v)}(d.shapeFlag&256||V&&Xt(V.vnode)&&V.vnode.shapeFlag&256)&&f.a&&ge(f.a,v),f.isMounted=!0,d=_=y=null}};f.scope.on();const S=f.effect=new Oi(T);f.scope.off();const w=f.update=S.run.bind(S),C=f.job=S.runIfDirty.bind(S);C.i=f,C.id=f.uid,S.scheduler=()=>en(C),lt(f,!0),w()},G=(f,d,_)=>{d.component=f;const y=f.vnode.props;f.vnode=d,f.next=null,hl(f,d.props,y,_),gl(f,d.children,_),Ne(),wn(f),Be()},K=(f,d,_,y,v,m,E,T,S=!1)=>{const w=f&&f.children,C=f?f.shapeFlag:0,x=d.children,{patchFlag:A,shapeFlag:j}=d;if(A>0){if(A&128){vs(w,x,_,y,v,m,E,T,S);return}else if(A&256){it(w,x,_,y,v,m,E,T,S);return}}j&8?(C&16&&Nt(w,v,m),x!==w&&c(_,x)):C&16?j&16?vs(w,x,_,y,v,m,E,T,S):Nt(w,v,m,!0):(C&8&&c(_,""),j&16&&Je(x,_,y,v,m,E,T,S))},it=(f,d,_,y,v,m,E,T,S)=>{f=f||At,d=d||At;const w=f.length,C=d.length,x=Math.min(w,C);let A;for(A=0;A<x;A++){const j=d[A]=S?Qe(d[A]):je(d[A]);k(f[A],j,_,null,v,m,E,T,S)}w>C?Nt(f,v,m,!0,!1,x):Je(d,_,y,v,m,E,T,S,x)},vs=(f,d,_,y,v,m,E,T,S)=>{let w=0;const C=d.length;let x=f.length-1,A=C-1;for(;w<=x&&w<=A;){const j=f[w],F=d[w]=S?Qe(d[w]):je(d[w]);if(Vt(j,F))k(j,F,_,null,v,m,E,T,S);else break;w++}for(;w<=x&&w<=A;){const j=f[x],F=d[A]=S?Qe(d[A]):je(d[A]);if(Vt(j,F))k(j,F,_,null,v,m,E,T,S);else break;x--,A--}if(w>x){if(w<=A){const j=A+1,F=j<C?d[j].el:y;for(;w<=A;)k(null,d[w]=S?Qe(d[w]):je(d[w]),_,F,v,m,E,T,S),w++}}else if(w>A)for(;w<=x;)Ee(f[w],v,m,!0),w++;else{const j=w,F=w,J=new Map;for(w=F;w<=A;w++){const pe=d[w]=S?Qe(d[w]):je(d[w]);pe.key!=null&&J.set(pe.key,w)}let V,de=0;const ce=A-F+1;let ke=!1,xe=0;const qt=new Array(ce);for(w=0;w<ce;w++)qt[w]=0;for(w=j;w<=x;w++){const pe=f[w];if(de>=ce){Ee(pe,v,m,!0);continue}let Oe;if(pe.key!=null)Oe=J.get(pe.key);else for(V=F;V<=A;V++)if(qt[V-F]===0&&Vt(pe,d[V])){Oe=V;break}Oe===void 0?Ee(pe,v,m,!0):(qt[Oe-F]=w+1,Oe>=xe?xe=Oe:ke=!0,k(pe,d[Oe],_,null,v,m,E,T,S),de++)}const gn=ke?yl(qt):At;for(V=gn.length-1,w=ce-1;w>=0;w--){const pe=F+w,Oe=d[pe],_n=pe+1<C?d[pe+1].el:y;qt[w]===0?k(null,Oe,_,_n,v,m,E,T,S):ke&&(V<0||w!==gn[V]?ot(Oe,_,_n,2):V--)}}},ot=(f,d,_,y,v=null)=>{const{el:m,type:E,transition:T,children:S,shapeFlag:w}=f;if(w&6){ot(f.component.subTree,d,_,y);return}if(w&128){f.suspense.move(d,_,y);return}if(w&64){E.move(f,d,_,Bt);return}if(E===be){r(m,d,_);for(let x=0;x<S.length;x++)ot(S[x],d,_,y);r(f.anchor,d,_);return}if(E===hr){U(f,d,_);return}if(y!==2&&w&1&&T)if(y===0)T.beforeEnter(m),r(m,d,_),ge(()=>T.enter(m),v);else{const{leave:x,delayLeave:A,afterLeave:j}=T,F=()=>{f.ctx.isUnmounted?n(m):r(m,d,_)},J=()=>{x(m,()=>{F(),j&&j()})};A?A(m,F,J):J()}else r(m,d,_)},Ee=(f,d,_,y=!1,v=!1)=>{const{type:m,props:E,ref:T,children:S,dynamicChildren:w,shapeFlag:C,patchFlag:x,dirs:A,cacheIndex:j}=f;if(x===-2&&(v=!1),T!=null&&(Ne(),Ds(T,null,_,f,!0),Be()),j!=null&&(d.renderCache[j]=void 0),C&256){d.ctx.deactivate(f);return}const F=C&1&&A,J=!Xt(f);let V;if(J&&(V=E&&E.onVnodeBeforeUnmount)&&Pe(V,d,f),C&6)Ho(f.component,_,y);else{if(C&128){f.suspense.unmount(_,y);return}F&&at(f,null,d,"beforeUnmount"),C&64?f.type.remove(f,d,_,Bt,y):w&&!w.hasOnce&&(m!==be||x>0&&x&64)?Nt(w,d,_,!1,!0):(m===be&&x&384||!v&&C&16)&&Nt(S,d,_),y&&dn(f)}(J&&(V=E&&E.onVnodeUnmounted)||F)&&ge(()=>{V&&Pe(V,d,f),F&&at(f,null,d,"unmounted")},_)},dn=f=>{const{type:d,el:_,anchor:y,transition:v}=f;if(d===be){qo(_,y);return}if(d===hr){O(f);return}const m=()=>{n(_),v&&!v.persisted&&v.afterLeave&&v.afterLeave()};if(f.shapeFlag&1&&v&&!v.persisted){const{leave:E,delayLeave:T}=v,S=()=>E(_,m);T?T(f.el,m,S):S()}else m()},qo=(f,d)=>{let _;for(;f!==d;)_=p(f),n(f),f=_;n(d)},Ho=(f,d,_)=>{const{bum:y,scope:v,job:m,subTree:E,um:T,m:S,a:w,parent:C,slots:{__:x}}=f;xn(S),xn(w),y&&Os(y),C&&R(x)&&x.forEach(A=>{C.renderCache[A]=void 0}),v.stop(),m&&(m.flags|=8,Ee(E,f,d,_)),T&&ge(T,d),ge(()=>{f.isUnmounted=!0},d),d&&d.pendingBranch&&!d.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===d.pendingId&&(d.deps--,d.deps===0&&d.resolve())},Nt=(f,d,_,y=!1,v=!1,m=0)=>{for(let E=m;E<f.length;E++)Ee(f[E],d,_,y,v)},ms=f=>{if(f.shapeFlag&6)return ms(f.component.subTree);if(f.shapeFlag&128)return f.suspense.next();const d=p(f.anchor||f.el),_=d&&d[Na];return _?p(_):d};let sr=!1;const pn=(f,d,_)=>{f==null?d._vnode&&Ee(d._vnode,null,null,!0):k(d._vnode||null,f,d,null,null,null,_),d._vnode=f,sr||(sr=!0,wn(),Ji(),sr=!1)},Bt={p:k,um:Ee,m:ot,r:dn,mt:tr,mc:Je,pc:K,pbc:nt,n:ms,o:t};return{render:pn,hydrate:void 0,createApp:ll(pn)}}function cr({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function lt({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function ml(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function uo(t,e,s=!1){const r=t.children,n=e.children;if(R(r)&&R(n))for(let i=0;i<r.length;i++){const o=r[i];let a=n[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[i]=Qe(n[i]),a.el=o.el),!s&&a.patchFlag!==-2&&uo(o,a)),a.type===Xs&&(a.el=o.el),a.type===tt&&!a.el&&(a.el=o.el)}}function yl(t){const e=t.slice(),s=[0];let r,n,i,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(n=s[s.length-1],t[n]<u){e[r]=n,s.push(r);continue}for(i=0,o=s.length-1;i<o;)a=i+o>>1,t[s[a]]<u?i=a+1:o=a;u<t[s[i]]&&(i>0&&(e[r]=s[i-1]),s[i]=r)}}for(i=s.length,o=s[i-1];i-- >0;)s[i]=o,o=e[o];return s}function ho(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:ho(e)}function xn(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const wl=Symbol.for("v-scx"),bl=()=>Ps(wl);function Sl(t,e){return nn(t,null,{flush:"sync"})}function ur(t,e,s){return nn(t,e,s)}function nn(t,e,s=B){const{immediate:r,deep:n,flush:i,once:o}=s,a=ne({},s),l=e&&r||!e&&i!=="post";let u;if(ls){if(i==="sync"){const g=bl();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=Re,g.resume=Re,g.pause=Re,g}}const c=re;a.call=(g,b,k)=>$e(g,c,b,k);let h=!1;i==="post"?a.scheduler=g=>{ge(g,c&&c.suspense)}:i!=="sync"&&(h=!0,a.scheduler=(g,b)=>{b?g():en(g)}),a.augmentJob=g=>{e&&(g.flags|=4),h&&(g.flags|=2,c&&(g.id=c.uid,g.i=c))};const p=$a(t,e,a);return ls&&(u?u.push(p):l&&p()),p}function Tl(t,e,s){const r=this.proxy,n=Y(t)?t.includes(".")?fo(r,t):()=>r[t]:t.bind(r,r);let i;I(e)?i=e:(i=e.handler,s=e);const o=hs(this),a=nn(n,i.bind(r),s);return o(),a}function fo(t,e){const s=e.split(".");return()=>{let r=t;for(let n=0;n<s.length&&r;n++)r=r[s[n]];return r}}function El(t,e,s=B){const r=Bl(),n=Fe(e),i=He(e),o=po(t,n),a=Aa((l,u)=>{let c,h=B,p;return Sl(()=>{const g=t[n];fe(c,g)&&(c=g,u())}),{get(){return l(),s.get?s.get(c):c},set(g){const b=s.set?s.set(g):g;if(!fe(b,c)&&!(h!==B&&fe(g,h)))return;const k=r.vnode.props;k&&(e in k||n in k||i in k)&&(`onUpdate:${e}`in k||`onUpdate:${n}`in k||`onUpdate:${i}`in k)||(c=g,u()),r.emit(`update:${e}`,b),fe(g,b)&&fe(g,h)&&!fe(b,p)&&u(),h=g,p=b}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||B:a,done:!1}:{done:!0}}}},a}const po=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Fe(e)}Modifiers`]||t[`${He(e)}Modifiers`];function kl(t,e,...s){if(t.isUnmounted)return;const r=t.vnode.props||B;let n=s;const i=e.startsWith("update:"),o=i&&po(r,e.slice(7));o&&(o.trim&&(n=s.map(c=>Y(c)?c.trim():c)),o.number&&(n=s.map(br)));let a,l=r[a=rr(e)]||r[a=rr(Fe(e))];!l&&i&&(l=r[a=rr(He(e))]),l&&$e(l,t,6,n);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,$e(u,t,6,n)}}function go(t,e,s=!1){const r=e.emitsCache,n=r.get(t);if(n!==void 0)return n;const i=t.emits;let o={},a=!1;if(!I(t)){const l=u=>{const c=go(u,e,!0);c&&(a=!0,ne(o,c))};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Q(t)&&r.set(t,null),null):(R(i)?i.forEach(l=>o[l]=null):ne(o,i),Q(t)&&r.set(t,o),o)}function Ys(t,e){return!t||!Bs(e)?!1:(e=e.slice(2).replace(/Once$/,""),H(t,e[0].toLowerCase()+e.slice(1))||H(t,He(e))||H(t,e))}function On(t){const{type:e,vnode:s,proxy:r,withProxy:n,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:c,props:h,data:p,setupState:g,ctx:b,inheritAttrs:k}=t,P=Us(t);let $,N;try{if(s.shapeFlag&4){const O=n||r,D=O;$=je(u.call(D,O,c,h,g,p,b)),N=a}else{const O=e;$=je(O.length>1?O(h,{attrs:a,slots:o,emit:l}):O(h,null)),N=e.props?a:xl(a)}}catch(O){es.length=0,Ws(O,t,1),$=ye(tt)}let U=$;if(N&&k!==!1){const O=Object.keys(N),{shapeFlag:D}=U;O.length&&D&7&&(i&&O.some(qr)&&(N=Ol(N,i)),U=Ut(U,N,!1,!0))}return s.dirs&&(U=Ut(U,null,!1,!0),U.dirs=U.dirs?U.dirs.concat(s.dirs):s.dirs),s.transition&&tn(U,s.transition),$=U,Us(P),$}const xl=t=>{let e;for(const s in t)(s==="class"||s==="style"||Bs(s))&&((e||(e={}))[s]=t[s]);return e},Ol=(t,e)=>{const s={};for(const r in t)(!qr(r)||!(r.slice(9)in e))&&(s[r]=t[r]);return s};function Pl(t,e,s){const{props:r,children:n,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return r?Pn(r,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let h=0;h<c.length;h++){const p=c[h];if(o[p]!==r[p]&&!Ys(u,p))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Pn(r,o,u):!0:!!o;return!1}function Pn(t,e,s){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let n=0;n<r.length;n++){const i=r[n];if(e[i]!==t[i]&&!Ys(s,i))return!0}return!1}function Al({vnode:t,parent:e},s){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=s,e=e.parent;else break}}const _o=t=>t.__isSuspense;function Cl(t,e){e&&e.pendingBranch?R(t)?e.effects.push(...t):e.effects.push(t):Da(t)}const be=Symbol.for("v-fgt"),Xs=Symbol.for("v-txt"),tt=Symbol.for("v-cmt"),hr=Symbol.for("v-stc"),es=[];let ve=null;function Ze(t=!1){es.push(ve=t?null:[])}function jl(){es.pop(),ve=es[es.length-1]||null}let as=1;function An(t,e=!1){as+=t,t<0&&ve&&e&&(ve.hasOnce=!0)}function vo(t){return t.dynamicChildren=as>0?ve||At:null,jl(),as>0&&ve&&ve.push(t),t}function pt(t,e,s,r,n,i){return vo(It(t,e,s,r,n,i,!0))}function Rl(t,e,s,r,n){return vo(ye(t,e,s,r,n,!0))}function mo(t){return t?t.__v_isVNode===!0:!1}function Vt(t,e){return t.type===e.type&&t.key===e.key}const yo=({key:t})=>t??null,As=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?Y(t)||te(t)||I(t)?{i:_e,r:t,k:e,f:!!s}:t:null);function It(t,e=null,s=null,r=0,n=null,i=t===be?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&yo(e),ref:e&&As(e),scopeId:zi,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:_e};return a?(on(l,s),i&128&&t.normalize(l)):s&&(l.shapeFlag|=Y(s)?8:16),as>0&&!o&&ve&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&ve.push(l),l}const ye=$l;function $l(t,e=null,s=null,r=0,n=null,i=!1){if((!t||t===Za)&&(t=tt),mo(t)){const a=Ut(t,e,!0);return s&&on(a,s),as>0&&!i&&ve&&(a.shapeFlag&6?ve[ve.indexOf(t)]=a:ve.push(a)),a.patchFlag=-2,a}if(Jl(t)&&(t=t.__vccOpts),e){e=Il(e);let{class:a,style:l}=e;a&&!Y(a)&&(e.class=Jr(a)),Q(l)&&(Zr(l)&&!R(l)&&(l=ne({},l)),e.style=Kr(l))}const o=Y(t)?1:_o(t)?128:Ba(t)?64:Q(t)?4:I(t)?2:0;return It(t,e,s,r,n,o,i,!0)}function Il(t){return t?Zr(t)||no(t)?ne({},t):t:null}function Ut(t,e,s=!1,r=!1){const{props:n,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?Dl(n||{},e):n,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&yo(u),ref:e&&e.ref?s&&i?R(i)?i.concat(As(e)):[i,As(e)]:As(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==be?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ut(t.ssContent),ssFallback:t.ssFallback&&Ut(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&tn(c,l.clone(c)),c}function Ll(t=" ",e=0){return ye(Xs,null,t,e)}function Ul(t="",e=!1){return e?(Ze(),Rl(tt,null,t)):ye(tt,null,t)}function je(t){return t==null||typeof t=="boolean"?ye(tt):R(t)?ye(be,null,t.slice()):mo(t)?Qe(t):ye(Xs,null,String(t))}function Qe(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ut(t)}function on(t,e){let s=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(R(e))s=16;else if(typeof e=="object")if(r&65){const n=e.default;n&&(n._c&&(n._d=!1),on(t,n()),n._c&&(n._d=!0));return}else{s=32;const n=e._;!n&&!no(e)?e._ctx=_e:n===3&&_e&&(_e.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else I(e)?(e={default:e,_ctx:_e},s=32):(e=String(e),r&64?(s=16,e=[Ll(e)]):s=8);t.children=e,t.shapeFlag|=s}function Dl(...t){const e={};for(let s=0;s<t.length;s++){const r=t[s];for(const n in r)if(n==="class")e.class!==r.class&&(e.class=Jr([e.class,r.class]));else if(n==="style")e.style=Kr([e.style,r.style]);else if(Bs(n)){const i=e[n],o=r[n];o&&i!==o&&!(R(i)&&i.includes(o))&&(e[n]=i?[].concat(i,o):o)}else n!==""&&(e[n]=r[n])}return e}function Pe(t,e,s,r=null){$e(t,e,7,[s,r])}const Ml=to();let Fl=0;function Nl(t,e,s){const r=t.type,n=(e?e.appContext:t.appContext)||Ml,i={uid:Fl++,vnode:t,type:r,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ra(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:oo(r,n),emitsOptions:go(r,n),emit:null,emitted:null,propsDefaults:B,inheritAttrs:r.inheritAttrs,ctx:B,data:B,props:B,attrs:B,slots:B,refs:B,setupState:B,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=kl.bind(null,i),t.ce&&t.ce(i),i}let re=null;const Bl=()=>re||_e;let Fs,Cr;{const t=Vs(),e=(s,r)=>{let n;return(n=t[s])||(n=t[s]=[]),n.push(r),i=>{n.length>1?n.forEach(o=>o(i)):n[0](i)}};Fs=e("__VUE_INSTANCE_SETTERS__",s=>re=s),Cr=e("__VUE_SSR_SETTERS__",s=>ls=s)}const hs=t=>{const e=re;return Fs(t),t.scope.on(),()=>{t.scope.off(),Fs(e)}},Cn=()=>{re&&re.scope.off(),Fs(null)};function wo(t){return t.vnode.shapeFlag&4}let ls=!1;function ql(t,e=!1,s=!1){e&&Cr(e);const{props:r,children:n}=t.vnode,i=wo(t);ul(t,r,i,e),pl(t,n,s||e);const o=i?Hl(t,e):void 0;return e&&Cr(!1),o}function Hl(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,tl);const{setup:r}=s;if(r){Ne();const n=t.setupContext=r.length>1?Kl(t):null,i=hs(t),o=us(r,t,0,[t.props,n]),a=yi(o);if(Be(),i(),(a||t.sp)&&!Xt(t)&&Gi(t),a){if(o.then(Cn,Cn),e)return o.then(l=>{jn(t,l)}).catch(l=>{Ws(l,t,0)});t.asyncDep=o}else jn(t,o)}else bo(t)}function jn(t,e,s){I(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Q(e)&&(t.setupState=Hi(e)),bo(t)}function bo(t,e,s){const r=t.type;t.render||(t.render=r.render||Re);{const n=hs(t);Ne();try{sl(t)}finally{Be(),n()}}}const Vl={get(t,e){return se(t,"get",""),t[e]}};function Kl(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,Vl),slots:t.slots,emit:t.emit,expose:e}}function Zs(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Hi(Ea(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Zt)return Zt[s](t)},has(e,s){return s in e||s in Zt}})):t.proxy}function Jl(t){return I(t)&&"__vccOpts"in t}const Wl=(t,e)=>ja(t,e,ls),zl="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let jr;const Rn=typeof window<"u"&&window.trustedTypes;if(Rn)try{jr=Rn.createPolicy("vue",{createHTML:t=>t})}catch{}const So=jr?t=>jr.createHTML(t):t=>t,Gl="http://www.w3.org/2000/svg",Ql="http://www.w3.org/1998/Math/MathML",Le=typeof document<"u"?document:null,$n=Le&&Le.createElement("template"),Yl={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,r)=>{const n=e==="svg"?Le.createElementNS(Gl,t):e==="mathml"?Le.createElementNS(Ql,t):s?Le.createElement(t,{is:s}):Le.createElement(t);return t==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:t=>Le.createTextNode(t),createComment:t=>Le.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Le.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,r,n,i){const o=s?s.previousSibling:e.lastChild;if(n&&(n===i||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),s),!(n===i||!(n=n.nextSibling)););else{$n.innerHTML=So(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=$n.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},Xl=Symbol("_vtc");function Zl(t,e,s){const r=t[Xl];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const In=Symbol("_vod"),ec=Symbol("_vsh"),tc=Symbol(""),sc=/(^|;)\s*display\s*:/;function rc(t,e,s){const r=t.style,n=Y(s);let i=!1;if(s&&!n){if(e)if(Y(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();s[a]==null&&Cs(r,a,"")}else for(const o in e)s[o]==null&&Cs(r,o,"");for(const o in s)o==="display"&&(i=!0),Cs(r,o,s[o])}else if(n){if(e!==s){const o=r[tc];o&&(s+=";"+o),r.cssText=s,i=sc.test(s)}}else e&&t.removeAttribute("style");In in t&&(t[In]=i?r.display:"",t[ec]&&(r.display="none"))}const Ln=/\s*!important$/;function Cs(t,e,s){if(R(s))s.forEach(r=>Cs(t,e,r));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const r=nc(t,e);Ln.test(s)?t.setProperty(He(r),s.replace(Ln,""),"important"):t[r]=s}}const Un=["Webkit","Moz","ms"],fr={};function nc(t,e){const s=fr[e];if(s)return s;let r=Fe(e);if(r!=="filter"&&r in t)return fr[e]=r;r=Si(r);for(let n=0;n<Un.length;n++){const i=Un[n]+r;if(i in t)return fr[e]=i}return e}const Dn="http://www.w3.org/1999/xlink";function Mn(t,e,s,r,n,i=sa(e)){r&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(Dn,e.slice(6,e.length)):t.setAttributeNS(Dn,e,s):s==null||i&&!Ei(s)?t.removeAttribute(e):t.setAttribute(e,i?"":st(s)?String(s):s)}function Fn(t,e,s,r,n){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?So(s):s);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=s==null?t.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in t))&&(t.value=l),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const a=typeof t[e];a==="boolean"?s=Ei(s):s==null&&a==="string"?(s="",o=!0):a==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(n||e)}function Ot(t,e,s,r){t.addEventListener(e,s,r)}function ic(t,e,s,r){t.removeEventListener(e,s,r)}const Nn=Symbol("_vei");function oc(t,e,s,r,n=null){const i=t[Nn]||(t[Nn]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=ac(e);if(r){const u=i[e]=uc(r,n);Ot(t,a,u,l)}else o&&(ic(t,a,o,l),i[e]=void 0)}}const Bn=/(?:Once|Passive|Capture)$/;function ac(t){let e;if(Bn.test(t)){e={};let r;for(;r=t.match(Bn);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):He(t.slice(2)),e]}let dr=0;const lc=Promise.resolve(),cc=()=>dr||(lc.then(()=>dr=0),dr=Date.now());function uc(t,e){const s=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=s.attached)return;$e(hc(r,s.value),e,5,[r])};return s.value=t,s.attached=cc(),s}function hc(t,e){if(R(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(r=>n=>!n._stopped&&r&&r(n))}else return e}const qn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,fc=(t,e,s,r,n,i)=>{const o=n==="svg";e==="class"?Zl(t,r,o):e==="style"?rc(t,s,r):Bs(e)?qr(e)||oc(t,e,s,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):dc(t,e,r,o))?(Fn(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Mn(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Y(r))?Fn(t,Fe(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Mn(t,e,r,o))};function dc(t,e,s,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&qn(e)&&I(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return qn(e)&&Y(s)?!1:e in t}const Hn=t=>{const e=t.props["onUpdate:modelValue"]||!1;return R(e)?s=>Os(e,s):e};function pc(t){t.target.composing=!0}function Vn(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const pr=Symbol("_assign"),gc={created(t,{modifiers:{lazy:e,trim:s,number:r}},n){t[pr]=Hn(n);const i=r||n.props&&n.props.type==="number";Ot(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;s&&(a=a.trim()),i&&(a=br(a)),t[pr](a)}),s&&Ot(t,"change",()=>{t.value=t.value.trim()}),e||(Ot(t,"compositionstart",pc),Ot(t,"compositionend",Vn),Ot(t,"change",Vn))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:r,trim:n,number:i}},o){if(t[pr]=Hn(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?br(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===s||n&&t.value.trim()===l)||(t.value=l))}},_c={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},vc=(t,e)=>{const s=t._withKeys||(t._withKeys={}),r=e.join(".");return s[r]||(s[r]=n=>{if(!("key"in n))return;const i=He(n.key);if(e.some(o=>o===i||_c[o]===i))return t(n)})},mc=ne({patchProp:fc},Yl);let Kn;function yc(){return Kn||(Kn=_l(mc))}const wc=(...t)=>{const e=yc().createApp(...t),{mount:s}=e;return e.mount=r=>{const n=Sc(r);if(!n)return;const i=e._component;!I(i)&&!i.render&&!i.template&&(i.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=s(n,!1,bc(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e};function bc(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Sc(t){return Y(t)?document.querySelector(t):t}const Tc="modulepreload",Ec=function(t){return"/"+t},Jn={},fs=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){let o=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=o(s.map(u=>{if(u=Ec(u),u in Jn)return;Jn[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":Tc,c||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),c)return new Promise((g,b)=>{p.addEventListener("load",g),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},kc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>fs(async()=>{const{default:r}=await Promise.resolve().then(()=>Mt);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class an extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class xc extends an{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Oc extends an{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Pc extends an{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Rr;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Rr||(Rr={}));var Ac=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class Cc{constructor(e,{headers:s={},customFetch:r,region:n=Rr.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=kc(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return Ac(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=s;let a={},{region:l}=s;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:u}).catch(b=>{throw new xc(b)}),h=c.headers.get("x-relay-error");if(h&&h==="true")throw new Oc(c);if(!c.ok)throw new Pc(c);let p=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return p==="application/json"?g=yield c.json():p==="application/octet-stream"?g=yield c.blob():p==="text/event-stream"?g=c:p==="multipart/form-data"?g=yield c.formData():g=yield c.text(),{data:g,error:null}}catch(n){return{data:null,error:n}}})}}function jc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Rc(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var s=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}),s}var X={},mt={},yt={},wt={},bt={},St={},$c=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Dt=$c();const Ic=Dt.fetch,To=Dt.fetch.bind(Dt),Eo=Dt.Headers,Lc=Dt.Request,Uc=Dt.Response,Mt=Object.freeze(Object.defineProperty({__proto__:null,Headers:Eo,Request:Lc,Response:Uc,default:To,fetch:Ic},Symbol.toStringTag,{value:"Module"})),Dc=Rc(Mt);var Ss={},Wn;function ko(){if(Wn)return Ss;Wn=1,Object.defineProperty(Ss,"__esModule",{value:!0});class t extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return Ss.default=t,Ss}var zn;function xo(){if(zn)return St;zn=1;var t=St&&St.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(St,"__esModule",{value:!0});const e=t(Dc),s=t(ko());class r{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=Object.assign({},this.headers),this.headers[i]=o,this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var c,h,p;let g=null,b=null,k=null,P=u.status,$=u.statusText;if(u.ok){if(this.method!=="HEAD"){const D=await u.text();D===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?b=D:b=JSON.parse(D))}const U=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),O=(h=u.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");U&&O&&O.length>1&&(k=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(g={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,k=null,P=406,$="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const U=await u.text();try{g=JSON.parse(U),Array.isArray(g)&&u.status===404&&(b=[],g=null,P=200,$="OK")}catch{u.status===404&&U===""?(P=204,$="No Content"):g={message:U}}if(g&&this.isMaybeSingle&&(!((p=g==null?void 0:g.details)===null||p===void 0)&&p.includes("0 rows"))&&(g=null,P=200,$="OK"),g&&this.shouldThrowOnError)throw new s.default(g)}return{error:g,data:b,count:k,status:P,statusText:$}});return this.shouldThrowOnError||(l=l.catch(u=>{var c,h,p;return{error:{message:`${(c=u==null?void 0:u.name)!==null&&c!==void 0?c:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(p=u==null?void 0:u.code)!==null&&p!==void 0?p:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,o)}returns(){return this}overrideTypes(){return this}}return St.default=r,St}var Gn;function Oo(){if(Gn)return bt;Gn=1;var t=bt&&bt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bt,"__esModule",{value:!0});const e=t(xo());class s extends e.default{select(n){let i=!1;const o=(n??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(n,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${n}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${n}`),this}range(n,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${n}`),this.url.searchParams.set(u,`${i-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:n=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var c;const h=[n?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),p=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${p}"; options=${h};`,u==="json"?this:this}rollback(){var n;return((n=this.headers.Prefer)!==null&&n!==void 0?n:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return bt.default=s,bt}var Qn;function ln(){if(Qn)return wt;Qn=1;var t=wt&&wt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wt,"__esModule",{value:!0});const e=t(Oo());class s extends e.default{eq(n,i){return this.url.searchParams.append(n,`eq.${i}`),this}neq(n,i){return this.url.searchParams.append(n,`neq.${i}`),this}gt(n,i){return this.url.searchParams.append(n,`gt.${i}`),this}gte(n,i){return this.url.searchParams.append(n,`gte.${i}`),this}lt(n,i){return this.url.searchParams.append(n,`lt.${i}`),this}lte(n,i){return this.url.searchParams.append(n,`lte.${i}`),this}like(n,i){return this.url.searchParams.append(n,`like.${i}`),this}likeAllOf(n,i){return this.url.searchParams.append(n,`like(all).{${i.join(",")}}`),this}likeAnyOf(n,i){return this.url.searchParams.append(n,`like(any).{${i.join(",")}}`),this}ilike(n,i){return this.url.searchParams.append(n,`ilike.${i}`),this}ilikeAllOf(n,i){return this.url.searchParams.append(n,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(n,i){return this.url.searchParams.append(n,`ilike(any).{${i.join(",")}}`),this}is(n,i){return this.url.searchParams.append(n,`is.${i}`),this}in(n,i){const o=Array.from(new Set(i)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(n,`in.(${o})`),this}contains(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cs.{${i.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(i)}`),this}containedBy(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cd.{${i.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(i)}`),this}rangeGt(n,i){return this.url.searchParams.append(n,`sr.${i}`),this}rangeGte(n,i){return this.url.searchParams.append(n,`nxl.${i}`),this}rangeLt(n,i){return this.url.searchParams.append(n,`sl.${i}`),this}rangeLte(n,i){return this.url.searchParams.append(n,`nxr.${i}`),this}rangeAdjacent(n,i){return this.url.searchParams.append(n,`adj.${i}`),this}overlaps(n,i){return typeof i=="string"?this.url.searchParams.append(n,`ov.${i}`):this.url.searchParams.append(n,`ov.{${i.join(",")}}`),this}textSearch(n,i,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(n,`${l}fts${u}.${i}`),this}match(n){return Object.entries(n).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(n,i,o){return this.url.searchParams.append(n,`not.${i}.${o}`),this}or(n,{foreignTable:i,referencedTable:o=i}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${n})`),this}filter(n,i,o){return this.url.searchParams.append(n,`${i}.${o}`),this}}return wt.default=s,wt}var Yn;function Po(){if(Yn)return yt;Yn=1;var t=yt&&yt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yt,"__esModule",{value:!0});const e=t(ln());class s{constructor(n,{headers:i={},schema:o,fetch:a}){this.url=n,this.headers=i,this.schema=o,this.fetch=a}select(n,{head:i=!1,count:o}={}){const a=i?"HEAD":"GET";let l=!1;const u=(n??"*").split("").map(c=>/\s/.test(c)&&!l?"":(c==='"'&&(l=!l),c)).join("");return this.url.searchParams.set("select",u),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(n,{count:i,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(n)){const u=n.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}upsert(n,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const u="POST",c=[`resolution=${o?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(n)){const h=n.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(h.length>0){const p=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}update(n,{count:i}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),this.headers.Prefer=a.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}delete({count:n}={}){const i="DELETE",o=[];return n&&o.push(`count=${n}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return yt.default=s,yt}var Kt={},Jt={},Xn;function Mc(){return Xn||(Xn=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.version=void 0,Jt.version="0.0.0-automated"),Jt}var Zn;function Fc(){if(Zn)return Kt;Zn=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.DEFAULT_HEADERS=void 0;const t=Mc();return Kt.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},Kt}var ei;function Nc(){if(ei)return mt;ei=1;var t=mt&&mt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(mt,"__esModule",{value:!0});const e=t(Po()),s=t(ln()),r=Fc();class n{constructor(o,{headers:a={},schema:l,fetch:u}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=u}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:u=!1,count:c}={}){let h;const p=new URL(`${this.url}/rpc/${o}`);let g;l||u?(h=l?"HEAD":"GET",Object.entries(a).filter(([k,P])=>P!==void 0).map(([k,P])=>[k,Array.isArray(P)?`{${P.join(",")}}`:`${P}`]).forEach(([k,P])=>{p.searchParams.append(k,P)})):(h="POST",g=a);const b=Object.assign({},this.headers);return c&&(b.Prefer=`count=${c}`),new s.default({method:h,url:p,headers:b,schema:this.schemaName,body:g,fetch:this.fetch,allowEmpty:!1})}}return mt.default=n,mt}var ti;function Bc(){if(ti)return X;ti=1;var t=X&&X.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(X,"__esModule",{value:!0}),X.PostgrestError=X.PostgrestBuilder=X.PostgrestTransformBuilder=X.PostgrestFilterBuilder=X.PostgrestQueryBuilder=X.PostgrestClient=void 0;const e=t(Nc());X.PostgrestClient=e.default;const s=t(Po());X.PostgrestQueryBuilder=s.default;const r=t(ln());X.PostgrestFilterBuilder=r.default;const n=t(Oo());X.PostgrestTransformBuilder=n.default;const i=t(xo());X.PostgrestBuilder=i.default;const o=t(ko());return X.PostgrestError=o.default,X.default={PostgrestClient:e.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:n.default,PostgrestBuilder:i.default,PostgrestError:o.default},X}var qc=Bc();const Hc=jc(qc),{PostgrestClient:Vc,PostgrestQueryBuilder:qh,PostgrestFilterBuilder:Hh,PostgrestTransformBuilder:Vh,PostgrestBuilder:Kh,PostgrestError:Jh}=Hc;let $r;typeof window>"u"?$r=require("ws"):$r=window.WebSocket;const Kc="2.11.10",Jc={"X-Client-Info":`realtime-js/${Kc}`},Wc="1.0.0",Ao=1e4,zc=1e3;var Lt;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Lt||(Lt={}));var ae;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ae||(ae={}));var we;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(we||(we={}));var Ir;(function(t){t.websocket="websocket"})(Ir||(Ir={}));var ft;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ft||(ft={}));class Gc{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const n=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+n));o=o+n;const l=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class Co{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var W;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(W||(W={}));const si=(t,e,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=Qc(o,t,e,n),i),{})},Qc=(t,e,s,r)=>{const n=e.find(a=>a.name===t),i=n==null?void 0:n.type,o=s[t];return i&&!r.includes(i)?jo(i,o):Lr(o)},jo=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return eu(e,s)}switch(t){case W.bool:return Yc(e);case W.float4:case W.float8:case W.int2:case W.int4:case W.int8:case W.numeric:case W.oid:return Xc(e);case W.json:case W.jsonb:return Zc(e);case W.timestamp:return tu(e);case W.abstime:case W.date:case W.daterange:case W.int4range:case W.int8range:case W.money:case W.reltime:case W.text:case W.time:case W.timestamptz:case W.timetz:case W.tsrange:case W.tstzrange:return Lr(e);default:return Lr(e)}},Lr=t=>t,Yc=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Xc=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Zc=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},eu=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>jo(e,a))}return t},tu=t=>typeof t=="string"?t.replace(" ","T"):t,Ro=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class gr{constructor(e,s,r={},n=Ao){this.channel=e,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ri;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ri||(ri={}));class ts{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ts.syncState(this.state,n,i,o),this.pendingDiffs.forEach(l=>{this.state=ts.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=ts.syncDiff(this.state,n,i,o),a())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,n){const i=this.cloneDeep(e),o=this.transformState(s),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const h=i[u];if(h){const p=c.map(P=>P.presence_ref),g=h.map(P=>P.presence_ref),b=c.filter(P=>g.indexOf(P.presence_ref)<0),k=h.filter(P=>p.indexOf(P.presence_ref)<0);b.length>0&&(a[u]=b),k.length>0&&(l[u]=k)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,n)}static syncDiff(e,s,r,n){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const h=e[a].map(g=>g.presence_ref),p=c.filter(g=>h.indexOf(g.presence_ref)<0);e[a].unshift(...p)}r(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[a]=u,n(a,u,l),u.length===0&&delete e[a]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const n=e[r];return"metas"in n?s[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ni;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ni||(ni={}));var ii;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ii||(ii={}));var Ue;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ue||(Ue={}));class cn{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=ae.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new gr(this,we.join,this.params,this.timeout),this.rejoinTimer=new Co(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ae.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ae.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=ae.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ae.errored,this.rejoinTimer.scheduleTimeout())}),this._on(we.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new ts(this),this.broadcastEndpointURL=Ro(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(c=>e==null?void 0:e(Ue.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(Ue.CLOSED));const l={},u={broadcast:i,presence:o,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&n!==void 0?n:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:c})=>{var h;if(this.socket.setAuth(),c===void 0){e==null||e(Ue.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,g=(h=p==null?void 0:p.length)!==null&&h!==void 0?h:0,b=[];for(let k=0;k<g;k++){const P=p[k],{filter:{event:$,schema:N,table:U,filter:O}}=P,D=c&&c[k];if(D&&D.event===$&&D.schema===N&&D.table===U&&D.filter===O)b.push(Object.assign(Object.assign({},P),{id:D.id}));else{this.unsubscribe(),this.state=ae.errored,e==null||e(Ue.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(Ue.SUBSCRIBED);return}}).receive("error",c=>{this.state=ae.errored,e==null||e(Ue.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ue.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this._on(e,s,r)}async send(e,s={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ae.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(we.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const n=new gr(this,we.leave,{},e);n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),o}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new gr(this,e,s,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var n,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=we;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,s,r);if(s&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(g=>{var b,k,P;return((b=g.filter)===null||b===void 0?void 0:b.event)==="*"||((P=(k=g.filter)===null||k===void 0?void 0:k.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===o}).map(g=>g.callback(p,r)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var b,k,P,$,N,U;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const O=g.id,D=(b=g.filter)===null||b===void 0?void 0:b.event;return O&&((k=s.ids)===null||k===void 0?void 0:k.includes(O))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((P=s.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const O=(N=($=g==null?void 0:g.filter)===null||$===void 0?void 0:$.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return O==="*"||O===((U=s==null?void 0:s.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof p=="object"&&"ids"in p){const b=p.data,{schema:k,table:P,commit_timestamp:$,type:N,errors:U}=b;p=Object.assign(Object.assign({},{schema:k,table:P,commit_timestamp:$,eventType:N,new:{},old:{},errors:U}),this._getPayloadRecords(b))}g.callback(p,r)})}_isClosed(){return this.state===ae.closed}_isJoined(){return this.state===ae.joined}_isJoining(){return this.state===ae.joining}_isLeaving(){return this.state===ae.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const n=e.toLocaleLowerCase(),i={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&cn.isEqual(n.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(we.close,{},e)}_onError(e){this._on(we.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ae.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=si(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=si(e.columns,e.old_record)),s}}const oi=()=>{},su=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ru{constructor(e,s){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Jc,this.params={},this.timeout=Ao,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=oi,this.ref=0,this.logger=oi,this.conn=null,this.sendBuffer=[],this.serializer=new Gc,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>fs(async()=>{const{default:l}=await Promise.resolve().then(()=>Mt);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Ir.websocket}`,this.httpEndpoint=Ro(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const n=(r=s==null?void 0:s.params)===null||r===void 0?void 0:r.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,o)=>o(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Co(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=$r),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new nu(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Wc}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Lt.connecting:return ft.Connecting;case Lt.open:return ft.Open;case Lt.closing:return ft.Closing;default:return ft.Closed}}isConnected(){return this.connectionState()===ft.Open}channel(e,s={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===r);if(n)return n;{const i=new cn(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:r,payload:n,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(r=>{s&&r.updateJoinPayload({access_token:s,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(we.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(zc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:r,event:n,payload:i,ref:o}=s;r==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${n} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(s))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(we.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${r}${n}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([su],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}}class nu{constructor(e,s,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Lt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class un extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Z(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class iu extends un{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ur extends un{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var ou=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const $o=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>fs(async()=>{const{default:r}=await Promise.resolve().then(()=>Mt);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},au=()=>ou(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fs(()=>Promise.resolve().then(()=>Mt),void 0)).Response:Response}),Dr=t=>{if(Array.isArray(t))return t.map(s=>Dr(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,r])=>{const n=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=Dr(r)}),e};var gt=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const _r=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),lu=(t,e,s)=>gt(void 0,void 0,void 0,function*(){const r=yield au();t instanceof r&&!(s!=null&&s.noResolveJson)?t.json().then(n=>{e(new iu(_r(n),t.status||500))}).catch(n=>{e(new Ur(_r(n),n))}):e(new Ur(_r(t),t))}),cu=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(n.body=JSON.stringify(r)),Object.assign(Object.assign({},n),s))};function ds(t,e,s,r,n,i){return gt(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(s,cu(e,r,n,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>lu(l,a,r))})})}function Ns(t,e,s,r){return gt(this,void 0,void 0,function*(){return ds(t,"GET",e,s,r)})}function Ye(t,e,s,r,n){return gt(this,void 0,void 0,function*(){return ds(t,"POST",e,r,n,s)})}function uu(t,e,s,r,n){return gt(this,void 0,void 0,function*(){return ds(t,"PUT",e,r,n,s)})}function hu(t,e,s,r){return gt(this,void 0,void 0,function*(){return ds(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function Io(t,e,s,r,n){return gt(this,void 0,void 0,function*(){return ds(t,"DELETE",e,r,n,s)})}var ue=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const fu={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ai={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class du{constructor(e,s={},r,n){this.url=e,this.headers=s,this.bucketId=r,this.fetch=$o(n)}uploadOrUpdate(e,s,r,n){return ue(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ai),n);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n!=null&&n.headers&&(a=Object.assign(Object.assign({},a),n.headers));const u=this._removeEmptyFolders(s),c=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),p=yield h.json();return h.ok?{data:{path:u,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(i){if(Z(i))return{data:null,error:i};throw i}})}upload(e,s,r){return ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,n){return ue(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",s);try{let l;const u=Object.assign({upsert:ai.upsert},n),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),p=yield h.json();return h.ok?{data:{path:i,fullPath:p.Key},error:null}:{data:null,error:p}}catch(l){if(Z(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,s){return ue(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);s!=null&&s.upsert&&(n["x-upsert"]="true");const i=yield Ye(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new un("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}update(e,s,r){return ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s,r){return ue(this,void 0,void 0,function*(){try{return{data:yield Ye(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}})}copy(e,s,r){return ue(this,void 0,void 0,function*(){try{return{data:{path:(yield Ye(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}})}createSignedUrl(e,s,r){return ue(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Ye(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}})}createSignedUrls(e,s,r){return ue(this,void 0,void 0,function*(){try{const n=yield Ye(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}})}download(e,s){return ue(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Ns(this.fetch,`${this.url}/${n}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Z(a))return{data:null,error:a};throw a}})}info(e){return ue(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const r=yield Ns(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Dr(r),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}exists(e){return ue(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield hu(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Z(r)&&r instanceof Ur){const n=r.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,s){const r=this._getFinalPath(e),n=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&n.push(i);const a=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&n.push(l);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return ue(this,void 0,void 0,function*(){try{return{data:yield Io(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}})}list(e,s,r){return ue(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},fu),s),{prefix:e||""});return{data:yield Ye(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const pu="2.7.1",gu={"X-Client-Info":`storage-js/${pu}`};var Tt=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class _u{constructor(e,s={},r){this.url=e,this.headers=Object.assign(Object.assign({},gu),s),this.fetch=$o(r)}listBuckets(){return Tt(this,void 0,void 0,function*(){try{return{data:yield Ns(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}})}getBucket(e){return Tt(this,void 0,void 0,function*(){try{return{data:yield Ns(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Tt(this,void 0,void 0,function*(){try{return{data:yield Ye(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return Tt(this,void 0,void 0,function*(){try{return{data:yield uu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Tt(this,void 0,void 0,function*(){try{return{data:yield Ye(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Tt(this,void 0,void 0,function*(){try{return{data:yield Io(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}})}}class vu extends _u{constructor(e,s={},r){super(e,s,r)}from(e){return new du(this.url,this.headers,e,this.fetch)}}const mu="2.49.10";let zt="";typeof Deno<"u"?zt="deno":typeof document<"u"?zt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zt="react-native":zt="node";const yu={"X-Client-Info":`supabase-js-${zt}/${mu}`},wu={headers:yu},bu={schema:"public"},Su={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Tu={};var Eu=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const ku=t=>{let e;return t?e=t:typeof fetch>"u"?e=To:e=fetch,(...s)=>e(...s)},xu=()=>typeof Headers>"u"?Eo:Headers,Ou=(t,e,s)=>{const r=ku(s),n=xu();return(i,o)=>Eu(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let u=new n(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var Pu=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};function Au(t){return t.endsWith("/")?t:t+"/"}function Cu(t,e){var s,r;const{db:n,auth:i,realtime:o,global:a}=t,{db:l,auth:u,realtime:c,global:h}=e,p={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},c),o),global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Pu(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}const Lo="2.69.1",Pt=30*1e3,Mr=3,vr=Mr*Pt,ju="http://localhost:9999",Ru="supabase.auth.token",$u={"X-Client-Info":`gotrue-js/${Lo}`},Fr="X-Supabase-Api-Version",Uo={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Iu=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Lu=6e5;class hn extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function L(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Uu extends hn{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function Du(t){return L(t)&&t.name==="AuthApiError"}class Do extends hn{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class rt extends hn{constructor(e,s,r,n){super(e,r,n),this.name=s,this.status=r}}class We extends rt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Mu(t){return L(t)&&t.name==="AuthSessionMissingError"}class mr extends rt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ts extends rt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Es extends rt{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Fu(t){return L(t)&&t.name==="AuthImplicitGrantRedirectError"}class li extends rt{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Nr extends rt{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function yr(t){return L(t)&&t.name==="AuthRetryableFetchError"}class ci extends rt{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class ss extends rt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ui="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),hi=` 	
\r=`.split(""),Nu=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<hi.length;e+=1)t[hi[e].charCodeAt(0)]=-2;for(let e=0;e<ui.length;e+=1)t[ui[e].charCodeAt(0)]=e;return t})();function Mo(t,e,s){const r=Nu[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function fi(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{Hu(o,r,s)};for(let o=0;o<t.length;o+=1)Mo(t.charCodeAt(o),n,i);return e.join("")}function Bu(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function qu(t,e){for(let s=0;s<t.length;s+=1){let r=t.charCodeAt(s);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(t.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}Bu(r,e)}}function Hu(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Vu(t){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)Mo(t.charCodeAt(n),s,r);return new Uint8Array(e)}function Ku(t){const e=[];return qu(t,s=>e.push(s)),new Uint8Array(e)}function Ju(t){return Math.round(Date.now()/1e3)+t}function Wu(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ae=()=>typeof window<"u"&&typeof document<"u",ct={tested:!1,writable:!1},rs=()=>{if(!Ae())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ct.tested)return ct.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ct.tested=!0,ct.writable=!0}catch{ct.tested=!0,ct.writable=!1}return ct.writable};function zu(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return s.searchParams.forEach((r,n)=>{e[n]=r}),e}const Fo=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>fs(async()=>{const{default:r}=await Promise.resolve().then(()=>Mt);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},Gu=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",No=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},ks=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},xs=async(t,e)=>{await t.removeItem(e)};class er{constructor(){this.promise=new er.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}er.promiseConstructor=Promise;function wr(t){const e=t.split(".");if(e.length!==3)throw new ss("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Iu.test(e[r]))throw new ss("JWT not in base64url format");return{header:JSON.parse(fi(e[0])),payload:JSON.parse(fi(e[1])),signature:Vu(e[2]),raw:{header:e[0],payload:e[1]}}}async function Qu(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Yu(t,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function Xu(t){return("0"+t.toString(16)).substr(-2)}function Zu(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,Xu).join("")}async function eh(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function th(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await eh(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Et(t,e,s=!1){const r=Zu();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await No(t,`${e}-code-verifier`,n);const i=await th(r);return[i,r===i?"plain":"s256"]}const sh=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function rh(t){const e=t.headers.get(Fr);if(!e||!e.match(sh))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function nh(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function ih(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var oh=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};const ht=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ah=[502,503,504];async function di(t){var e;if(!Gu(t))throw new Nr(ht(t),0);if(ah.includes(t.status))throw new Nr(ht(t),t.status);let s;try{s=await t.json()}catch(i){throw new Do(ht(i),i)}let r;const n=rh(t);if(n&&n.getTime()>=Uo["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new ci(ht(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new We}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new ci(ht(s),t.status,s.weak_password.reasons);throw new Uu(ht(s),t.status||500,r)}const lh=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function M(t,e,s,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[Fr]||(i[Fr]=Uo["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await ch(t,e,s+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function ch(t,e,s,r,n,i){const o=lh(e,r,n,i);let a;try{a=await t(s,Object.assign({},o))}catch(l){throw console.error(l),new Nr(ht(l),0)}if(a.ok||await di(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await di(l)}}function ze(t){var e;let s=null;dh(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Ju(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function pi(t){const e=ze(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Xe(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function uh(t){return{data:t,error:null}}function hh(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i}=t,o=oh(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function fh(t){return t}function dh(t){return t.access_token&&t.refresh_token&&t.expires_in}var ph=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};class gh{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=Fo(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s="global"){try{return await M(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(L(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await M(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Xe})}catch(r){if(L(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=ph(e,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await M(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:hh,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(L(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await M(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Xe})}catch(s){if(L(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,n,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await M(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:fh});if(c.error)throw c.error;const h=await c.json(),p=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(b=>{const k=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(b.split(";")[1].split("=")[1]);u[`${P}Page`]=k}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(L(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await M(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Xe})}catch(s){if(L(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){try{return await M(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Xe})}catch(r){if(L(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){try{return await M(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Xe})}catch(r){if(L(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:s,error:r}=await M(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(L(s))return{data:null,error:s};throw s}}async _deleteFactor(e){try{return{data:await M(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(L(s))return{data:null,error:s};throw s}}}const _h={getItem:t=>rs()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{rs()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{rs()&&globalThis.localStorage.removeItem(t)}};function gi(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function vh(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const kt={debug:!!(globalThis&&rs()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Bo extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class mh extends Bo{}async function yh(t,e,s){kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),kt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new mh(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(kt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}vh();const wh={url:ju,storageKey:Ru,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$u,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function _i(t,e,s){return await s()}class cs{constructor(e){var s,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=cs.nextInstanceID,cs.nextInstanceID+=1,this.instanceID>0&&Ae()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},wh),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new gh({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Fo(n.fetch),this.lock=n.lock||_i,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Ae()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=yh:this.lock=_i,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:rs()?this.storage=_h:(this.memoryStorage={},this.storage=gi(this.memoryStorage)):(this.memoryStorage={},this.storage=gi(this.memoryStorage)),Ae()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Lo}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=zu(window.location.href);let r="none";if(this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce"),Ae()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:i}=await this._getSessionFromURL(s,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Fu(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return L(s)?{error:s}:{error:new Do("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,n;try{const i=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:ze}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(L(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,r,n;try{let i;if("email"in e){const{email:c,password:h,options:p}=e;let g=null,b=null;this.flowType==="pkce"&&([g,b]=await Et(this.storage,this.storageKey)),i=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:c,password:h,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:g,code_challenge_method:b},xform:ze})}else if("phone"in e){const{phone:c,password:h,options:p}=e;i=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(n=p==null?void 0:p.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:ze})}else throw new Ts("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(L(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:a}=e;s=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:pi})}else if("phone"in e){const{phone:i,password:o,options:a}=e;s=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:pi})}else throw new Ts("You must provide either an email or phone number and a password");const{data:r,error:n}=s;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new mr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(L(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const s=await ks(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/");try{const{data:i,error:o}=await M(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ze});if(await xs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new mr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(L(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:r,token:n,access_token:i,nonce:o}=e,a=await M(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ze}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new mr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(s){if(L(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,n,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Et(this.storage,this.storageKey));const{error:h}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Ts("You must provide either an email or phone number.")}catch(a){if(L(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var s,r;try{let n,i;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await M(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:ze});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(n){if(L(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var s,r,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Et(this.storage,this.storageKey)),await M(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:uh})}catch(i){if(L(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new We;const{error:n}=await M(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(L(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:o}=await M(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:o,error:a}=await M(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Ts("You must provide either an email or phone number and a type")}catch(s){if(L(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await ks(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<vr:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Xe}):await this._useSession(async s=>{var r,n,i;const{data:o,error:a}=s;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new We}:await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Xe})})}catch(s){if(L(s))return Mu(s)&&(await this._removeSession(),await xs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new We;const o=n.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Et(this.storage,this.storageKey));const{data:u,error:c}=await M(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Xe});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(L(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new We;const s=Date.now()/1e3;let r=s,n=!0,i=null;const{payload:o}=wr(e.access_token);if(o.exp&&(r=o.exp,n=r<=s),n){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(L(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:o,error:a}=s;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new We;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(L(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Ae())throw new Es("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Es(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new li("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Es("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new li("No code detected.");const{data:N,error:U}=await this._exchangeCodeForSession(e.code);if(U)throw U;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new Es("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(a);let p=c+h;l&&(p=parseInt(l));const g=p-c;g*1e3<=Pt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const b=p-h;c-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,p,c):c-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,p,c);const{data:k,error:P}=await this._getUser(i);if(P)throw P;const $={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:p,refresh_token:o,token_type:u,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:$,redirectType:e.type},error:null}}catch(r){if(L(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await ks(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{error:i};const o=(r=n.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Du(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await xs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=Wu(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,n;try{const{data:{session:i},error:o}=s;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await Et(this.storage,this.storageKey,!0));try{return await M(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(L(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(L(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:n}=await this._useSession(async i=>{var o,a,l,u,c;const{data:h,error:p}=i;if(p)throw p;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await M(this.fetch,"GET",g,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(n)throw n;return Ae()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(L(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)throw o;return await M(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(L(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await Yu(async n=>(n>0&&await Qu(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await M(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ze})),(n,i)=>{const o=200*Math.pow(2,n);return i&&yr(i)&&Date.now()+o-r<Pt})}catch(r){if(this._debug(s,"error",r),L(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),Ae()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await ks(this.storage,this.storageKey);if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const n=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<vr;if(this._debug(s,`session has${n?"":" not"} expired with margin of ${vr}s`),n){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),yr(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new We;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new er;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new We;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(n,"error",i),L(i)){const o={session:null,error:i};return yr(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,s)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await No(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await xs(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ae()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Pt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/Pt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Pt}ms, refresh threshold is ${Mr} ticks`),n<=Mr&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Bo)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ae()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Et(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await M(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(L(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await M(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(L(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:a}=await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(s){if(L(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(L(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(e==null?void 0:e.factors)||[],n=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=wr(n.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(s=n.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+Lu>Date.now()))return r;const{data:n,error:i}=await M(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new ss("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),r=n.keys.find(o=>o.kid===e),!r)throw new ss("No matching signing key found in JWKS");return r}async getClaims(e,s={keys:[]}){try{let r=e;if(!r){const{data:g,error:b}=await this.getSession();if(b||!g.session)return{data:null,error:b};r=g.session.access_token}const{header:n,payload:i,signature:o,raw:{header:a,payload:l}}=wr(r);if(nh(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:i,header:n,signature:o},error:null}}const u=ih(n.alg),c=await this.fetchJwk(n.kid,s),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Ku(`${a}.${l}`)))throw new ss("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(r){if(L(r))return{data:null,error:r};throw r}}}cs.nextInstanceID=0;const bh=cs;class Sh extends bh{constructor(e){super(e)}}var Th=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class Eh{constructor(e,s,r){var n,i,o;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=Au(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:bu,realtime:Tu,auth:Object.assign(Object.assign({},Su),{storageKey:u}),global:wu},h=Cu(r??{},c);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=Ou(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Vc(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Cc(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new vu(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Th(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,storageKey:i,flowType:o,lock:a,debug:l},u,c){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Sh({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new ru(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const kh=(t,e,s)=>new Eh(t,e,s),xh="https://fpvalcjixpmsydkbpyib.supabase.co",Oh="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZwdmFsY2ppeHBtc3lka2JweWliIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE3MTUwNjUsImV4cCI6MjA1NzI5MTA2NX0.3gx-lZwBrkXttNO9bEy-jBu-0KvH-OC-8JspE3Ft1tk",qe=kh(xh,Oh);async function Ph(){const{error:t}=await qe.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});if(t)throw t}async function Ah(){const{error:t}=await qe.auth.signOut({scope:"global"});if(t)throw t}async function Ch(){const{data:{user:t}}=await qe.auth.getUser();return t&&t.user_metadata&&t.user_metadata.full_name?t.user_metadata.full_name:"Accedi con Google"}async function jh(){const{data:{user:t}}=await qe.auth.getUser();return t?t.id:""}async function Rh(){const{data:t}=await qe.auth.getSession();return!!t.session}const $h=zs({__name:"LoginComponent",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=El(t,"modelValue"),s=$s("Accedi con Google");Qs(async()=>{let n=await Ch();s.value=n});async function r(){try{e.value?(await Ah(),s.value="Accedi con Google",e.value=!1):await Ph()}catch(n){console.error(n)}}return(n,i)=>(Ze(),pt("button",{onClick:r},js(s.value),1))}});class vi{constructor(){_t(this,"id",0);_t(this,"created_at",new Date);_t(this,"note","");_t(this,"value",0);_t(this,"owner","")}}const Ih={style:{padding:"2pt"}},Lh=zs({__name:"NoteRow",props:{note:{},fetchNotes:{type:Function}},setup(t){const e=t;async function s(n){const{error:i}=await qe.from("notes").delete().eq("id",n);i?console.error(i):e.fetchNotes()}async function r(n){const{error:i}=await qe.from("notes").update({value:n.value+1}).eq("id",n.id);i?console.error(i):e.fetchNotes()}return(n,i)=>(Ze(),pt("div",null,[It("span",Ih,js(n.note.note)+" ("+js(n.note.value)+")",1),It("span",{style:{padding:"2pt",color:"lightcoral"},onClick:i[0]||(i[0]=o=>s(n.note.id))},"delete"),It("span",{style:{padding:"2pt",color:"lightgreen"},onClick:i[1]||(i[1]=o=>r(n.note))},"update")]))}}),Uh={class:"card"},Dh=zs({__name:"NotesComponent",setup(t){const s=$s([]);async function r(){const{data:o,error:a}=await qe.from("notes").select("*").order("value",{ascending:!1});a?console.error(a):(s.value=[],o.forEach(l=>{let u=new vi;u.id=l.id,u.created_at=new Date(l.created_at),u.note=l.note,u.value=l.value,s.value.push(u)}))}let n=$s("");async function i(){let o=new vi;o.note=n.value;const{error:a}=await qe.from("notes").insert({note:o.note,owner:await jh()});a?console.error(a):r(),n.value=""}return Qs(()=>{r()}),(o,a)=>(Ze(),pt("div",Uh,[Fa(It("input",{type:"text",onKeyup:vc(i,["enter"]),"onUpdate:modelValue":a[0]||(a[0]=l=>te(n)?n.value=l:n=l)},null,544),[[gc,qi(n)]]),(Ze(!0),pt(be,null,el(s.value,l=>(Ze(),pt("div",null,[ye(Lh,{note:l,"fetch-notes":r},null,8,["note"])]))),256))]))}}),Mh={key:0},Fh=zs({__name:"App",setup(t){const e=$s(!1);return Qs(async()=>{e.value=await Rh()}),(s,r)=>(Ze(),pt(be,null,[ye($h,{modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=n=>e.value=n)},null,8,["modelValue"]),e.value?(Ze(),pt("div",Mh,[ye(Dh)])):Ul("",!0)],64))}});wc(Fh).mount("#app");
